import{c as b,r as a,j as e,d as v,R as w,L as y,Z as k,A as m,T as z,q as p}from"./index-Dfm8v7ej.js";import{e as h}from"./EventBusService-uYe-P4JI.js";import{S}from"./search-Dn7-SK0M.js";import{M as L}from"./map-pin-vwqU9BtF.js";import{D as _}from"./droplets-XYTlFp_P.js";import{T as D}from"./thermometer-DEO5nHHu.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M 22 14 L 22 10",key:"nqc4tb"}],["rect",{x:"2",y:"6",width:"16",height:"12",rx:"2",key:"13zb55"}]],u=b("battery",A);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],C=b("server",T),R=({api:l,t:I})=>{const[i,g]=a.useState([]),[f,c]=a.useState(!0),[n,d]=a.useState(!1),o=async()=>{c(!0);try{const r=(await l.getIoTDevices()).data||[];g(r),r.forEach(t=>{t.status==="offline"&&h.publish("iot.sensor_offline",{deviceId:t._id,name:t.name}),t.batteryLevel<15&&h.publish("iot.battery_critical",{deviceId:t._id,battery:t.batteryLevel})})}catch(s){console.error("IoT Node sync failed",s)}finally{c(!1)}};a.useEffect(()=>{o()},[l]);const j=()=>{d(!0),setTimeout(()=>{d(!1),o()},2e3)},x=s=>{switch(s){case"online":return"bg-emerald-500";case"offline":return"bg-rose-500";case"low_battery":return"bg-amber-500";default:return"bg-slate-500"}},N=s=>{switch(s){case"temperature":return e.jsx(D,{size:20});case"water_flow":return e.jsx(_,{size:20});case"camera":return e.jsx(m,{size:20});default:return e.jsx(p,{size:20})}};return e.jsxs("div",{className:"space-y-10 animate-in fade-in duration-700",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-slate-900 p-8 rounded-[2.5rem] border border-white/5 shadow-2xl text-white group overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:scale-110 transition-transform",children:e.jsx(C,{size:80})}),e.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest mb-3",children:"Mesh Fleet Status"}),e.jsxs("div",{className:"flex items-end gap-3 relative z-10",children:[e.jsx("h4",{className:"text-5xl font-black tracking-tighter tabular-nums",children:i.filter(s=>s.status==="online").length}),e.jsx("span",{className:"text-[10px] font-black uppercase text-emerald-500 mb-2",children:"Nodes Active"})]})]}),e.jsxs("div",{className:"bg-white border border-slate-200 p-8 rounded-[2.5rem] shadow-sm flex flex-col justify-center",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3",children:"Global Battery Avg"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(u,{className:"text-blue-600",size:32}),e.jsx("h4",{className:"text-4xl font-black text-slate-900 tabular-nums",children:"84%"})]})]}),e.jsxs("div",{className:"bg-white border border-slate-200 p-8 rounded-[2.5rem] shadow-sm flex flex-col justify-center",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3",children:"Integrity Consensus"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(v,{className:"text-emerald-500",size:32}),e.jsx("h4",{className:"text-4xl font-black text-slate-900 uppercase tracking-tighter",children:"Verified"})]})]}),e.jsxs("div",{className:"bg-blue-600 p-8 rounded-[2.5rem] shadow-2xl shadow-blue-500/20 text-white flex flex-col justify-center cursor-pointer hover:bg-blue-700 transition-all group",onClick:j,children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest mb-3 opacity-60",children:"Fleet Health Scan"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(w,{className:`shrink-0 ${n?"animate-spin":"group-hover:rotate-180 transition-transform duration-700"}`,size:32}),e.jsx("span",{className:"text-lg font-black uppercase tracking-tight",children:n?"Polling...":"Run Diagnostics"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-10",children:[e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8 px-2",children:[e.jsx("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-[0.2em]",children:"Fleet Device Matrix"}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-xl",children:[e.jsx(S,{size:14,className:"text-slate-400"}),e.jsx("input",{placeholder:"Search node UID...",className:"bg-transparent text-[10px] font-black uppercase outline-none w-32"})]})})]}),f?e.jsx("div",{className:"py-20 flex flex-col items-center opacity-30 gap-4",children:e.jsx(y,{size:32,className:"animate-spin"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6",children:i.map(s=>e.jsxs("div",{className:"bg-white border border-slate-200 rounded-[2.5rem] p-8 shadow-sm hover:shadow-2xl transition-all group relative overflow-hidden",children:[e.jsxs("div",{className:"flex items-start justify-between mb-10",children:[e.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center shadow-lg transition-transform group-hover:scale-110 ${x(s.status)} text-white`,children:N(s.type)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${x(s.status)} animate-pulse`}),e.jsx("span",{className:"text-[9px] font-black uppercase text-slate-400 tracking-widest",children:s.status})]})]}),e.jsx("h4",{className:"text-lg font-black text-slate-900 uppercase tracking-tight truncate mb-2",children:s.name}),e.jsxs("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-10 flex items-center gap-2",children:[e.jsx(L,{size:12})," Bldg 04 â€¢ Sector Alpha"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-8 border-t border-slate-50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase mb-2",children:"Battery Flow"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-1.5 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${s.batteryLevel<20?"bg-rose-500":"bg-emerald-500"}`,style:{width:`${s.batteryLevel}%`}})}),e.jsxs("span",{className:"text-[10px] font-black tabular-nums",children:[s.batteryLevel,"%"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase mb-2",children:"WiFi Mesh"}),e.jsx("div",{className:"flex items-center justify-end gap-1",children:[...Array(4)].map((r,t)=>e.jsx("div",{className:`w-1 h-3 rounded-full ${t<3?"bg-blue-600":"bg-slate-100"}`},t))})]})]}),e.jsx("button",{className:"mt-8 w-full py-3 bg-slate-50 text-slate-400 hover:text-slate-900 hover:bg-slate-100 rounded-xl text-[9px] font-black uppercase tracking-widest transition-all",children:"Configure Device"})]},s._id))})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-slate-900 rounded-[3rem] p-10 text-white shadow-2xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5",children:e.jsx(k,{size:100})}),e.jsxs("h4",{className:"text-xs font-black uppercase tracking-[0.2em] mb-10 relative z-10 flex items-center gap-3",children:[e.jsx(m,{size:18,className:"text-blue-400"})," Operational Alerts"]}),e.jsxs("div",{className:"space-y-6 relative z-10",children:[e.jsxs("div",{className:"p-5 bg-rose-500/10 border border-rose-500/20 rounded-2xl flex items-start gap-4 animate-in slide-in-from-bottom-2",children:[e.jsx(z,{className:"text-rose-500 shrink-0 mt-1",size:18}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black text-rose-500 uppercase tracking-widest mb-1",children:"Signal Loss Detected"}),e.jsx("p",{className:"text-[9px] font-bold text-slate-300 leading-relaxed uppercase",children:"Water Flow Sensor B-04 has been offline for 120+ minutes."})]})]}),e.jsxs("div",{className:"p-5 bg-white/5 border border-white/5 rounded-2xl flex items-start gap-4",children:[e.jsx(u,{className:"text-amber-500 shrink-0 mt-1",size:18}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black text-amber-500 uppercase tracking-widest mb-1",children:"Low Energy Alert"}),e.jsx("p",{className:"text-[9px] font-bold text-slate-300 leading-relaxed uppercase",children:"Mesh Node SE-90 battery critical (14%). Schedule replacement."})]})]})]})]}),e.jsxs("div",{className:"bg-white border border-slate-200 rounded-[3rem] p-10 shadow-sm",children:[e.jsx("h4",{className:"text-xs font-black text-slate-900 uppercase tracking-widest mb-10",children:"Firmware Lifecycle"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Current Protocol"}),e.jsx("p",{className:"text-sm font-black text-slate-800",children:"Sentinel V2.6.1-B"})]}),e.jsx("span",{className:"px-3 py-1 bg-emerald-50 text-emerald-600 rounded-lg text-[9px] font-black uppercase tracking-widest",children:"Stable"})]}),e.jsxs("button",{className:"w-full py-4 bg-slate-900 text-white rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-xl hover:bg-black transition-all flex items-center justify-center gap-3",children:[e.jsx(p,{size:14})," Schedule OTA Update"]})]})]})]})]})]})};export{R as default};
