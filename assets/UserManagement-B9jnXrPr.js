import{c as y,r,j as e,R as v,k as N,o as w}from"./index-D-P-TEXt.js";import{S as k}from"./search-sdvn9cyO.js";import{U as C}from"./user-check-DPFSjWsr.js";import{E as S}from"./ellipsis-vertical-B_C3eS-Y.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],R=y("user-x",A),_=({api:l,t})=>{const[g,b]=r.useState([]),[u,o]=r.useState(!1),[d,x]=r.useState(""),[n,f]=r.useState(""),i=async()=>{o(!0),x("");try{const s=await l.getAllUsers();b(s.data||[])}catch(s){x(s.message||t.connectionFailed)}finally{o(!1)}};r.useEffect(()=>{i()},[l]);const m=async(s,a)=>{try{await l.verifyUser(s,a),i()}catch(c){alert(c.message||"Action failed")}},j=async(s,a)=>{try{await l.changeRole(s,a),i()}catch(c){alert(c.message||"Action failed")}},p=g.filter(s=>s.username.toLowerCase().includes(n.toLowerCase())||s.email.toLowerCase().includes(n.toLowerCase())),h=t.langToggle==="EN";return e.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(k,{className:`absolute ${h?"right-4":"left-4"} top-1/2 -translate-y-1/2 text-slate-400`,size:18}),e.jsx("input",{className:`w-full ${h?"pr-12 pl-4":"pl-12 pr-4"} py-3 bg-white border border-slate-200 rounded-2xl outline-none focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 transition-all font-medium text-sm`,placeholder:t.searchOperators,value:n,onChange:s=>f(s.target.value)})]}),e.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-6 py-3 bg-white border border-slate-200 rounded-2xl text-xs font-black uppercase tracking-widest text-slate-600 hover:bg-slate-50 transition-all",children:[e.jsx(v,{size:14,className:u?"animate-spin":""}),t.refreshRegistry]})]}),d&&e.jsxs("div",{className:"p-4 bg-rose-50 border border-rose-100 rounded-2xl flex items-center gap-3 text-rose-600",children:[e.jsx(N,{size:20}),e.jsx("p",{className:"text-sm font-bold uppercase tracking-tight",children:d})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsxs("div",{className:"bg-white border border-slate-200 rounded-[2rem] overflow-hidden shadow-sm",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-50/80 text-slate-400 font-black border-b border-slate-200 uppercase tracking-[0.2em] text-[10px]",children:[e.jsx("th",{className:"px-8 py-5",children:t.identityStatus}),e.jsx("th",{className:"px-8 py-5",children:t.assignedRole}),e.jsx("th",{className:"px-8 py-5",children:t.lastActivity}),e.jsx("th",{className:"px-8 py-5 text-right",children:t.clearanceActions})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:p.map(s=>e.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors group",children:[e.jsx("td",{className:"px-8 py-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center font-black text-slate-400 group-hover:bg-blue-600 group-hover:text-white transition-all duration-300",children:s.username.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-black text-slate-800",children:s.username}),e.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-0.5",children:s.email}),e.jsx("div",{className:`mt-2 inline-flex items-center gap-1.5 px-2 py-0.5 rounded-lg text-[9px] font-black uppercase tracking-widest border ${s.status==="verified"?"bg-emerald-50 text-emerald-600 border-emerald-100":s.status==="pending"?"bg-amber-50 text-amber-600 border-amber-100":"bg-slate-100 text-slate-400 border-slate-200"}`,children:s.status})]})]})}),e.jsx("td",{className:"px-8 py-6",children:e.jsxs("select",{className:"bg-slate-50 border border-slate-200 rounded-xl px-3 py-1.5 text-xs font-bold text-slate-700 outline-none focus:ring-2 focus:ring-blue-500",value:s.role,onChange:a=>j(s._id,a.target.value),children:[e.jsx("option",{value:"Admin",children:"Admin"}),e.jsx("option",{value:"Supervisor",children:"Supervisor"}),e.jsx("option",{value:"Worker",children:"Worker"}),e.jsx("option",{value:"ReadOnly",children:"ReadOnly"})]})}),e.jsxs("td",{className:"px-8 py-6",children:[e.jsx("div",{className:"text-xs font-bold text-slate-500 tabular-nums",children:s.lastLogin?new Date(s.lastLogin).toLocaleString("fa-IR",{timeZone:"Asia/Tehran"}):t.never}),e.jsxs("div",{className:"text-[10px] text-slate-400 uppercase font-bold mt-1",children:[t.joined,": ",new Date(s.createdAt).toLocaleDateString("fa-IR",{timeZone:"Asia/Tehran"})]})]}),e.jsx("td",{className:"px-8 py-6 text-right",children:s.status==="pending"?e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsxs("button",{onClick:()=>m(s._id,!0),className:"flex items-center gap-1.5 px-4 py-2 bg-emerald-600 text-white rounded-xl text-[10px] font-black uppercase tracking-widest shadow-lg shadow-emerald-500/20 hover:bg-emerald-700 transition-all",children:[e.jsx(C,{size:14})," ",t.approve]}),e.jsxs("button",{onClick:()=>m(s._id,!1),className:"flex items-center gap-1.5 px-4 py-2 bg-white border border-rose-200 text-rose-600 rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-rose-50 transition-all",children:[e.jsx(R,{size:14})," ",t.reject]})]}):e.jsx("button",{className:"p-2.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-xl transition-all",children:e.jsx(S,{size:18})})})]},s._id))})]})}),p.length===0&&e.jsxs("div",{className:"py-20 text-center flex flex-col items-center gap-4",children:[e.jsx(w,{className:"text-slate-200",size:48}),e.jsx("p",{className:"text-sm font-black text-slate-400 uppercase tracking-widest",children:t.operatorDatabaseEmpty})]})]})})]})};export{_ as default};
