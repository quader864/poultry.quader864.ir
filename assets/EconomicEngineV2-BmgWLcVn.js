import{r as n,j as e,n as w,L as R,g as L,Z as A}from"./index-DeCNIanD.js";import{T as D}from"./trending-up-DCP86FId.js";import{C as E}from"./circle-check-WHjvYGP_.js";import{S as F}from"./scale-BNcZqPLm.js";import{C as P}from"./chart-pie-BnYm0VMJ.js";import{C as $}from"./calculator-BiGRSctz.js";import{C as M}from"./chart-column-27d2Te12.js";import{H as T}from"./history-DBpGxvt2.js";import{A as V}from"./arrow-right-DsGM9_qN.js";const Q=({flockId:a,cycleId:r,api:l,t:O,isRtl:B})=>{var m,p,h,b,u,g,j,f,N,v;const[c,k]=n.useState(null),[s,y]=n.useState(null),[C,x]=n.useState(!1);if(n.useEffect(()=>{(async()=>{if(!(!l.isValidObjectId(a)||!r)){x(!0);try{const[t,S]=await Promise.all([l.getCycleFinancialsV2(a,r),l.getCyclePredictV2(a,r)]);k(t.data),y(S.data)}catch(t){console.error(t)}finally{x(!1)}}})()},[a,r,l]),!l.isValidObjectId(a)||!r)return e.jsxs("div",{className:"h-[40vh] flex flex-col items-center justify-center text-slate-400 opacity-40",children:[e.jsx(w,{size:64,strokeWidth:1}),e.jsx("p",{className:"mt-4 text-[10px] font-black uppercase tracking-[0.4em]",children:"Select a Cycle Anchor to visualize Financial Flow"})]});if(C)return e.jsxs("div",{className:"h-[60vh] flex flex-col items-center justify-center opacity-40",children:[e.jsx(R,{size:48,className:"animate-spin text-amber-600 mb-6"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.4em]",children:"Establishing Fiscal Balance..."})]});if(!c)return null;const d=c.profitability||{},z=c.revenue||{},o=c.costs||{};return e.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-bottom-6 duration-700",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-slate-900 p-8 rounded-[2.5rem] text-white border border-white/5 shadow-2xl relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:scale-110 transition-transform",children:e.jsx(D,{size:80})}),e.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest mb-3 relative z-10",children:"Realized ROI"}),e.jsxs("h4",{className:"text-5xl font-black tabular-nums tracking-tighter text-emerald-400 relative z-10",children:["+",d.roi||"0","%"]}),e.jsxs("div",{className:"mt-6 flex items-center gap-2 text-emerald-400 relative z-10",children:[e.jsx(E,{size:14}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Above Farm Mean"})]})]}),e.jsxs("div",{className:"bg-white border border-slate-200 p-8 rounded-[2.5rem] shadow-sm group hover:border-blue-300 transition-all flex flex-col justify-center",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3",children:"Gross Revenue"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"text-4xl font-black text-slate-900 tabular-nums",children:["$",((m=z.total)==null?void 0:m.toLocaleString())||"0"]}),e.jsx(w,{size:32,className:"text-blue-500"})]})]}),e.jsxs("div",{className:"bg-white border border-slate-200 p-8 rounded-[2.5rem] shadow-sm group hover:border-rose-300 transition-all flex flex-col justify-center",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3",children:"Managed Costs"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"text-4xl font-black text-slate-900 tabular-nums",children:["$",((p=o.total)==null?void 0:p.toLocaleString())||"0"]}),e.jsx(F,{size:32,className:"text-rose-500"})]})]}),e.jsxs("div",{className:"bg-amber-600 p-8 rounded-[2.5rem] shadow-2xl shadow-amber-500/20 text-white relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:scale-110 transition-transform",children:e.jsx(P,{size:80})}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest mb-3 opacity-60",children:"Profit Margin"}),e.jsxs("h4",{className:"text-4xl font-black tracking-tighter",children:[d.margin||"0","%"]}),e.jsx("div",{className:"mt-4 p-2.5 bg-white/10 rounded-xl flex items-center justify-center gap-2 border border-white/10",children:e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"Fiscal Health: Strong"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-10",children:[e.jsxs("div",{className:"xl:col-span-2 bg-white border border-slate-200 rounded-[3.5rem] p-12 shadow-sm space-y-12",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-50 pb-10",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-900 text-white rounded-2xl flex items-center justify-center shadow-xl",children:e.jsx($,{size:32})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black text-slate-900 uppercase tracking-tighter",children:"Cost Allocation Ledger"}),e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mt-1",children:"Multi-Category Managed Expenditure"})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:"px-4 py-2 bg-slate-100 rounded-xl text-[11px] font-black text-slate-600 uppercase tracking-widest",children:"ISO 14064 AUDIT READY"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-16",children:[e.jsx("div",{className:"space-y-10",children:Object.entries(o).filter(([i])=>i!=="total").map(([i,t])=>e.jsxs("div",{className:"space-y-3 group",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] group-hover:text-blue-600 transition-colors",children:i.replace("Cost","")}),e.jsxs("span",{className:"text-sm font-black tabular-nums",children:["$",(t==null?void 0:t.toLocaleString())||"0"]})]}),e.jsx("div",{className:"h-2 w-full bg-slate-100 rounded-full overflow-hidden shadow-inner",children:e.jsx("div",{className:"h-full bg-blue-600 rounded-full transition-all duration-1000",style:{width:`${(t||0)/(o.total||1)*100}%`}})})]},i))}),e.jsxs("div",{className:"flex flex-col justify-between p-10 bg-slate-900 rounded-[3rem] text-white relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5 group-hover:scale-110 transition-transform",children:e.jsx(M,{size:100})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-[11px] font-black text-slate-500 uppercase tracking-[0.4em] mb-6",children:"Breakeven Velocity"}),e.jsxs("h4",{className:"text-5xl font-black text-blue-400 tracking-tighter mb-4",children:[d.paybackDays||"---"," ",e.jsx("span",{className:"text-base text-slate-500 uppercase ml-2 tracking-widest",children:"Days"})]}),e.jsx("p",{className:"text-xs font-bold text-slate-400 leading-relaxed uppercase",children:"The production lifecycle achieved cost-recovery analytics based on node performance."})]}),e.jsx("button",{className:"w-full mt-10 py-5 bg-white/5 border border-white/10 rounded-2xl text-[10px] font-black uppercase tracking-widest hover:bg-white/10 transition-all relative z-10",children:"Generate Detailed Ledger"})]})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-blue-600 rounded-[3rem] p-10 text-white shadow-2xl relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 group-hover:rotate-12 transition-transform duration-700",children:e.jsx(L,{size:100})}),e.jsxs("h4",{className:"text-xs font-black uppercase tracking-[0.3em] mb-10 relative z-10 flex items-center gap-3",children:[e.jsx(A,{size:18})," Revenue Prediction"]}),e.jsxs("div",{className:"space-y-6 relative z-10",children:[e.jsxs("div",{className:"p-6 bg-white/10 rounded-2xl border border-white/10",children:[e.jsx("p",{className:"text-[10px] font-bold text-blue-200 uppercase mb-3",children:"Expected Case"}),e.jsxs("p",{className:"text-4xl font-black tabular-nums tracking-tighter",children:["$",((b=(h=s==null?void 0:s.revenueForecast)==null?void 0:h.expectedCase)==null?void 0:b.toLocaleString())||"---"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-white/10 rounded-xl border border-white/5",children:[e.jsx("p",{className:"text-[8px] font-bold text-blue-200 uppercase mb-1",children:"Worst Case"}),e.jsxs("p",{className:"text-sm font-black tabular-nums",children:["$",((g=(u=s==null?void 0:s.revenueForecast)==null?void 0:u.worstCase)==null?void 0:g.toLocaleString())||"---"]})]}),e.jsxs("div",{className:"p-4 bg-white/10 rounded-xl border border-white/5",children:[e.jsx("p",{className:"text-[8px] font-bold text-emerald-300 uppercase mb-1",children:"Best Case"}),e.jsxs("p",{className:"text-sm font-black tabular-nums",children:["$",((f=(j=s==null?void 0:s.revenueForecast)==null?void 0:j.bestCase)==null?void 0:f.toLocaleString())||"---"]})]})]})]}),e.jsxs("div",{className:"mt-8 pt-8 border-t border-white/10 flex items-center justify-between text-[10px] font-black uppercase tracking-widest opacity-60",children:[e.jsx("span",{children:"Confidence Index"}),e.jsx("span",{children:"92.5%"})]})]}),e.jsxs("div",{className:"bg-white border border-slate-200 rounded-[3rem] p-10 shadow-sm",children:[e.jsxs("h4",{className:"text-xs font-black text-slate-900 uppercase tracking-widest mb-10 flex items-center gap-3",children:[e.jsx(T,{size:20,className:"text-indigo-600"})," Strategic Anchor"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-6 bg-slate-50 border border-slate-100 rounded-3xl",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Recommended Sale Node"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-black text-slate-900 uppercase",children:((N=s==null?void 0:s.saleRecommendation)==null?void 0:N.recommendedDate)||"Awaiting T-Zero"}),e.jsx(V,{size:18,className:"text-blue-500"})]})]}),e.jsxs("div",{className:"p-6 bg-emerald-50 border border-emerald-100 rounded-3xl",children:[e.jsx("p",{className:"text-[10px] font-black text-emerald-600 uppercase tracking-widest mb-2",children:"Market Delta"}),e.jsxs("p",{className:"text-sm font-black text-emerald-800 uppercase tracking-tight",children:["Projected Price: $",((v=s==null?void 0:s.saleRecommendation)==null?void 0:v.expectedPrice)||"---"]})]})]})]})]})]})]})};export{Q as default};
