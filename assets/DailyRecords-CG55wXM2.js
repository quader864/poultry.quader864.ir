import{c as k,r as i,j as e,a as v,X as J,R as Se,U as ze,L as D,C as Ce,D as K,B as Le}from"./index-CZC_pdxc.js";import{L as ee}from"./lock-open-Buy1Twar.js";import{S as De}from"./search-CoWt6R4W.js";import{D as Ie}from"./download-v0NYmer2.js";import{A as Ae}from"./arrow-up-right-C9U2SODA.js";import{T as te}from"./trash-2-CFyjPvZF.js";import{I as _e,U as Te}from"./utensils-crossed-CzwqrSbv.js";import{T as Re}from"./tag-_jh8PTp8.js";import{F as Ee}from"./file-text-BVmXy-bB.js";import{S as Me}from"./save-CG72XE71.js";import{D as $e}from"./dollar-sign-HlS1y5_c.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],Fe=k("arrow-down-left",qe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Be=k("funnel",Ue);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Oe=k("pen",Pe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],se=k("square-check-big",Ve);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],He=k("square",Ze);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Xe=k("trending-down",We),Ye={in:["purchase","transfer_in","return","adjustment"],out:["consumption","sale_domestic","sale_export","transfer_out","adjustment"],sale:["sale_domestic","sale_export","adjustment"],mortality:["disease","feed","water","low_oxygen","temp_stress","injury","inspection","cleaning"],adjustment:["adjustment","inspection"]},it=({movements:I,onSelectMovement:ae,onUpdateMovement:le,onDeleteMovement:ne,onUnlockDays:M,onLockDays:$,userRole:re,capabilities:q,t:n})=>{const[g,ie]=i.useState(""),[f,oe]=i.useState("all"),[A,ce]=i.useState(null),[d,j]=i.useState(new Set),[o,b]=i.useState(null),[_,T]=i.useState(null),[u,R]=i.useState(null),[p,E]=i.useState(null),[F,U]=i.useState(!1),[B,P]=i.useState(!1),[O,V]=i.useState(!1),[Z,H]=i.useState(!1),[S,W]=i.useState(""),[z,X]=i.useState(""),[C,Y]=i.useState(""),[h,m]=i.useState(""),[Q,x]=i.useState(null),de=re==="Admin"||q.includes("manage_system"),xe=q.includes("adjust_inventory"),s=n.langToggle==="EN",N=t=>t._id||t.id||"",G=t=>t.flockId||t.flock_id||"",L=t=>!!(t.locked||t.isLocked),me=t=>new Date(t).toLocaleDateString(s?"fa-IR":"en-US",{timeZone:"Asia/Tehran"}),ue=t=>new Date(t).toLocaleTimeString(s?"fa-IR":"en-US",{timeZone:"Asia/Tehran",hour:"2-digit",minute:"2-digit"}),w=I.filter(t=>{var l,r,c,y;return((l=t.notes)==null?void 0:l.toLowerCase().includes(g.toLowerCase()))||((r=t.reason)==null?void 0:r.toLowerCase().includes(g.toLowerCase()))||((c=t.source)==null?void 0:c.toLowerCase().includes(g.toLowerCase()))||((y=t.supplier)==null?void 0:y.toLowerCase().includes(g.toLowerCase()))?f==="all"?!0:f==="birds"?t.unit==="birds":f==="food"?t.unit==="kg"||t.reason==="feed":f==="losses"?t.type==="mortality":f==="sales"?t.type==="sale":!0:!1}),pe=t=>{ce(A===t?null:t)},he=()=>{const t=w.map(N).filter(Boolean);if(t.every(l=>d.has(l))){const l=new Set(d);t.forEach(r=>l.delete(r)),j(l)}else{const l=new Set(d);t.forEach(r=>l.add(r)),j(l)}x(null)},fe=(t,a)=>{if(a.stopPropagation(),!t)return;x(null);const l=new Set(d);l.has(t)?l.delete(t):l.add(t),j(l)},be=async t=>{if(t.preventDefault(),!!o){U(!0),m("");try{await le(N(o),{quantity:Number(o.quantity),reason:o.reason,notes:o.notes||""}),b(null)}catch(a){m(a.message||"Edit failed")}finally{U(!1)}}},ge=async t=>{if(t.preventDefault(),!(!_||!S.trim())){P(!0),m("");try{await ne(_,S),T(null),W("")}catch(a){m(a.message||"Delete failed")}finally{P(!1)}}},je=async t=>{if(t.preventDefault(),!(!u||!z.trim()||!M)){if(!u.flockId||!u.dates||u.dates.length===0){m("Missing flock reference or dates for batch operation.");return}V(!0),m("");try{await M(u.flockId,u.dates,z),R(null),X(""),j(new Set)}catch(a){m(a.message||"Unlock failed")}finally{V(!1)}}},Ne=async t=>{if(t.preventDefault(),!(!p||!C.trim()||!$)){if(!p.flockId||!p.dates||p.dates.length===0){m("Missing flock reference or dates for batch operation.");return}H(!0),m("");try{await $(p.flockId,p.dates,C),E(null),Y(""),j(new Set)}catch(a){m(a.message||"Lock failed")}finally{H(!1)}}},ye=()=>{const t=I.filter(c=>d.has(N(c))&&L(c));if(t.length===0){x(s?"هیچ مورد قفل شده‌ای برای بازگشایی انتخاب نشده است.":"No locked items selected for unlocking.");return}const a=Array.from(new Set(t.map(G).filter(Boolean)));if(a.length===0){x("Unable to resolve flock identity for selected items.");return}if(a.length>1){x(s?"نمی‌توانید مواردی از گله‌های مختلف را همزمان باز کنید.":"Cannot unlock items from multiple flocks simultaneously.");return}const l=a[0],r=Array.from(new Set(t.map(c=>{const y=new Date(c.date);return new Intl.DateTimeFormat("en-CA",{timeZone:"Asia/Tehran"}).format(y)})));R({flockId:l,dates:r}),x(null)},ke=()=>{const t=I.filter(c=>d.has(N(c))&&!L(c));if(t.length===0){x(s?"هیچ مورد بازی برای قفل کردن انتخاب نشده است.":"No open items selected for locking.");return}const a=Array.from(new Set(t.map(G).filter(Boolean)));if(a.length===0){x("Unable to resolve flock identity for selected items.");return}if(a.length>1){x(s?"نمی‌توانید مواردی از گله‌های مختلف را همزمان قفل کنید.":"Cannot lock items from multiple flocks simultaneously.");return}const l=a[0],r=Array.from(new Set(t.map(c=>{const y=new Date(c.date);return new Intl.DateTimeFormat("en-CA",{timeZone:"Asia/Tehran"}).format(y)})));E({flockId:l,dates:r}),x(null)},we=[{id:"all",label:s?"همه موارد":"All Entries",icon:e.jsx(K,{size:14})},{id:"birds",label:s?"پرنده‌ها":"Birds",icon:e.jsx(Le,{size:14})},{id:"food",label:s?"دان/جرم":"Feed/Mass",icon:e.jsx(Te,{size:14})},{id:"losses",label:s?"تلفات":"Losses",icon:e.jsx(Xe,{size:14})},{id:"sales",label:s?"فروش":"Sales",icon:e.jsx($e,{size:14})}],ve=()=>e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 px-6 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-slate-50 text-slate-300 rounded-[2rem] flex items-center justify-center mb-6 shadow-inner",children:e.jsx(K,{size:40,strokeWidth:1.5})}),e.jsx("h3",{className:"text-lg font-black text-slate-800 uppercase tracking-tight",children:n.historicalVoid||"No Raw Data Found"}),e.jsx("p",{className:"text-xs font-medium text-slate-400 max-w-xs mt-2 leading-relaxed",children:g||f!=="all"?s?"هیچ موردی مطابق با جستجو و فیلترهای شما یافت نشد.":"No entries match your current search and filters.":s?"هر تراکنش فردی ثبت شده در پایگاه داده در اینجا ظاهر می‌شود.":"Every individual transaction recorded in the database will appear here."})]});return e.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl overflow-hidden shadow-sm flex flex-col h-full transition-all relative",dir:s?"rtl":"ltr",children:[d.size>0&&e.jsxs("div",{className:"absolute top-0 left-0 right-0 z-30 bg-slate-900 text-white p-3 flex items-center justify-between animate-in slide-in-from-top duration-300",children:[e.jsxs("div",{className:"flex items-center gap-4 px-4",children:[e.jsxs("span",{className:"text-[10px] font-black uppercase tracking-[0.2em]",children:[d.size," ",n.itemsSelected]}),Q&&e.jsx("span",{className:"text-[10px] font-bold text-rose-400 uppercase bg-rose-400/10 px-3 py-1 rounded-lg border border-rose-400/20 animate-in fade-in zoom-in",children:Q})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[de&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:ye,className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all shadow-lg shadow-emerald-500/20 disabled:opacity-50",children:[e.jsx(ee,{size:14})," ",n.unlockSelected]}),e.jsxs("button",{onClick:ke,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all shadow-lg shadow-blue-500/20 disabled:opacity-50",children:[e.jsx(v,{size:14})," ",n.lock]})]}),e.jsx("button",{onClick:()=>{j(new Set),x(null)},className:"p-2 hover:bg-white/10 rounded-xl transition-colors",children:e.jsx(J,{size:18})})]})]}),e.jsxs("div",{className:"p-4 sm:p-5 border-b border-slate-100 flex flex-col gap-4 bg-slate-50/30",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"relative group flex-1 max-w-md",children:[e.jsx(De,{className:`absolute ${s?"right-3":"left-3"} top-1/2 -translate-y-1/2 text-slate-400`,size:16}),e.jsx("input",{type:"text",placeholder:s?"جستجوی جابجایی‌های خام...":"Search raw movements...",className:`w-full ${s?"pr-10 pl-4":"pl-10 pr-4"} py-2.5 bg-white border border-slate-200 rounded-xl text-sm font-medium focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 transition-all`,value:g,onChange:t=>ie(t.target.value)})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{className:"p-2.5 text-slate-600 bg-white border border-slate-200 rounded-xl hover:bg-slate-50 shadow-sm transition-all flex items-center gap-2 text-xs font-bold",children:[e.jsx(Ie,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:s?"خروجی داده خام":"EXPORT RAW"})]})})]}),e.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto no-scrollbar pb-1",children:[e.jsxs("div",{className:`flex items-center gap-2 ${s?"pl-4 border-l":"pr-4 border-r"} border-slate-200`,children:[e.jsx(Be,{size:14,className:"text-slate-400"}),e.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:s?"فیلترها":"Filters"})]}),we.map(t=>e.jsxs("button",{onClick:()=>oe(t.id),className:`whitespace-nowrap flex items-center gap-2 px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${f===t.id?"bg-slate-900 text-white shadow-lg shadow-slate-900/10":"bg-white border border-slate-200 text-slate-500 hover:border-slate-300"}`,children:[t.icon,t.label]},t.id))]})]}),w.length===0?e.jsx(ve,{}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm border-collapse min-w-[1000px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:`bg-slate-50/80 text-slate-500 font-black border-b border-slate-200 uppercase tracking-widest text-[10px] ${s?"text-right":"text-left"}`,children:[e.jsx("th",{className:"px-6 py-4 w-12 text-center",children:e.jsx("button",{onClick:he,className:"p-1 text-slate-400 hover:text-blue-600 transition-colors",children:e.jsx(se,{size:16,className:w.length>0&&w.every(t=>d.has(N(t)))?"text-blue-600":"text-slate-300"})})}),e.jsx("th",{className:"px-6 py-4 w-16 text-center",children:s?"نوع":"Type"}),e.jsx("th",{className:"px-6 py-4",children:s?"زمان":"Timestamp"}),e.jsx("th",{className:"px-6 py-4",children:s?"دسته‌بندی":"Category"}),e.jsx("th",{className:"px-6 py-4",children:s?"مقدار":"Quantity"}),e.jsx("th",{className:"px-6 py-4",children:s?"منبع":"Source"}),e.jsx("th",{className:"px-6 py-4",children:s?"یادداشت":"Notes"}),e.jsx("th",{className:`px-6 py-4 ${s?"text-left":"text-right"}`,children:s?"عملیات":"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:w.map(t=>{const a=N(t),l=L(t);return e.jsxs(Se.Fragment,{children:[e.jsxs("tr",{className:`hover:bg-blue-50/20 group cursor-pointer transition-all ${A===a?"bg-blue-50/30":""} ${d.has(a)?"bg-blue-50/50":""}`,onClick:()=>pe(a),children:[e.jsx("td",{className:"px-6 py-4",onClick:r=>fe(a,r),children:e.jsx("div",{className:"flex justify-center",children:d.has(a)?e.jsx(se,{size:16,className:"text-blue-600"}):e.jsx(He,{size:16,className:"text-slate-200 group-hover:text-slate-400 transition-colors"})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${t.type==="in"?"bg-emerald-100 text-emerald-600":t.type==="mortality"?"bg-rose-100 text-rose-600":t.type==="sale"?"bg-blue-100 text-blue-600":"bg-amber-100 text-amber-600"}`,children:t.type==="in"?e.jsx(Fe,{size:16}):e.jsx(Ae,{size:16})})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold text-slate-900",children:me(t.date)}),l&&e.jsxs("div",{className:"group/lock relative",children:[e.jsx(v,{size:12,className:"text-amber-500"}),e.jsxs("div",{className:"absolute bottom-full mb-2 hidden group-hover/lock:block bg-slate-800 text-white text-[8px] px-2 py-1 rounded whitespace-nowrap z-50",children:[n.locked,": ",t.lockedReason||"System"]})]})]}),e.jsx("span",{className:"text-[10px] text-slate-400 font-mono tracking-tighter",children:ue(t.date)})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2.5 py-1 rounded-lg bg-slate-100 text-slate-600 text-[10px] font-black uppercase tracking-widest",children:n[t.reason]||t.reason})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("span",{className:`font-black tabular-nums text-sm ${t.type==="in"?"text-emerald-600":"text-rose-600"}`,children:[t.type==="in"?"+":"-",(t.quantity??0).toLocaleString(s?"fa-IR":"en-US")]}),e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:n[t.unit]||t.unit})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"text-[11px] font-bold text-slate-600 uppercase flex items-center gap-1.5",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${t.source==="manual_entry"?"bg-blue-500":"bg-purple-500"}`}),n[t.source]||t.source.replace("_"," ")]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-xs text-slate-500 truncate max-w-[200px] italic",children:t.notes||"—"})}),e.jsx("td",{className:`px-6 py-4 ${s?"text-left":"text-right"}`,children:e.jsxs("div",{className:`flex items-center ${s?"justify-start":"justify-end"} gap-2`,children:[xe&&e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:r=>{r.stopPropagation(),b(t)},className:"p-1.5 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all",children:e.jsx(Oe,{size:14,className:l?"text-amber-500":""})}),e.jsx("button",{onClick:r=>{r.stopPropagation(),T(a)},className:"p-1.5 text-slate-400 hover:text-rose-600 hover:bg-rose-50 rounded-lg transition-all",children:e.jsx(te,{size:14,className:l?"text-amber-500":""})})]}),e.jsx("button",{onClick:r=>{r.stopPropagation(),ae(a)},className:"px-3 py-1.5 text-[10px] font-black uppercase tracking-widest text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-600 hover:text-white transition-all shadow-sm",children:s?"مشاهده":"VIEW"})]})})]}),A===a&&e.jsx("tr",{className:"bg-slate-50/50",children:e.jsx("td",{colSpan:8,className:"px-8 py-8 animate-in slide-in-from-top-2",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm",children:[e.jsxs("h4",{className:"text-[10px] font-black uppercase text-blue-600 mb-4 tracking-widest flex items-center gap-2",children:[e.jsx(_e,{size:12})," ",s?"متادیتا ورودی":"Entry Metadata"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-xs font-medium text-slate-500",children:[e.jsx("span",{children:s?"شناسه منحصر به فرد":"Unique ID"}),e.jsxs("span",{className:"font-mono text-slate-400 text-[10px] uppercase",children:["#",a.slice(-8)]})]}),e.jsxs("div",{className:"flex justify-between text-xs font-medium text-slate-500",children:[e.jsx("span",{children:s?"ثبت شده توسط":"Recorded By"}),e.jsxs("span",{className:"font-bold text-slate-800 uppercase tracking-tighter flex items-center gap-1",children:[e.jsx(ze,{size:10})," ",t.recordedBy||(s?"سیستم":"System")]})]})]})]}),e.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm",children:[e.jsxs("h4",{className:"text-[10px] font-black uppercase text-amber-600 mb-4 tracking-widest flex items-center gap-2",children:[e.jsx(Re,{size:12})," ",s?"اطلاعات تراکنش":"Transaction Info"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-xs font-medium text-slate-500",children:[e.jsx("span",{children:s?"تامین‌کننده":"Supplier"}),e.jsx("span",{className:"font-bold text-slate-900",children:t.supplier||(s?"نامشخص":"N/A")})]}),e.jsxs("div",{className:"flex justify-between text-xs font-medium text-slate-500",children:[e.jsx("span",{children:s?"وضعیت قفل":"Lock Status"}),e.jsx("span",{className:`font-bold text-[10px] uppercase tracking-tighter ${l?"text-amber-600":"text-emerald-600"}`,children:l?s?"محافظت شده":"Protected":s?"باز":"Open"})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 bg-white p-5 rounded-2xl border border-slate-200 shadow-sm",children:[e.jsxs("h4",{className:"text-[10px] font-black uppercase text-slate-400 mb-3 tracking-widest flex items-center gap-2",children:[e.jsx(Ee,{size:12})," ",s?"پیام کامل لاگ":"Full Log Message"]}),e.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-100 min-h-[60px]",children:[e.jsx("p",{className:"text-sm text-slate-600 font-medium leading-relaxed",children:t.notes||(s?"هیچ مشاهده اضافی ثبت نشده است.":"No additional observations recorded.")}),l&&e.jsxs("div",{className:"mt-4 p-2 bg-amber-50 border border-amber-100 rounded-lg flex items-center gap-2",children:[e.jsx(v,{size:12,className:"text-amber-600"}),e.jsxs("span",{className:"text-[9px] font-black text-amber-600 uppercase tracking-widest",children:[s?"قفل شده به دلیل:":"Locked for:"," ",t.lockedReason||(s?"محافظت سیستم":"System protection")]})]})]})]})]})})})]},a)})})]})}),u&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white rounded-[2rem] shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",dir:s?"rtl":"ltr",children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-emerald-50 text-emerald-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:e.jsx(ee,{size:32})}),e.jsx("h2",{className:"text-xl font-black text-slate-800 uppercase tracking-tight mb-2",children:n.unlockConfirm}),e.jsx("p",{className:"text-xs font-medium text-slate-400 mb-4 px-4",children:n.unlockDescription}),e.jsxs("div",{className:"mb-8 p-3 bg-slate-50 rounded-xl text-[10px] font-black uppercase tracking-widest text-slate-500",children:[u.dates.length," ",s?"روز برای بازگشایی شناسایی شد":"Dates Identified for Unlock"]}),e.jsxs("form",{onSubmit:je,className:"space-y-6",children:[h&&e.jsx("div",{className:"p-3 bg-rose-50 text-rose-600 text-[10px] font-black uppercase rounded-lg",children:h}),e.jsx("textarea",{required:!0,rows:3,className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm outline-none focus:ring-4 focus:ring-blue-500/10 focus:border-blue-300",value:z,onChange:t=>X(t.target.value),placeholder:s?"دلیل عملیاتی برای باز کردن قفل...":"Operational reason for unlock..."}),e.jsxs("div",{className:"flex gap-3 px-4",children:[e.jsx("button",{type:"button",onClick:()=>R(null),className:"flex-1 py-4 border border-slate-200 rounded-2xl text-[10px] font-black uppercase tracking-widest text-slate-500",children:n.cancel}),e.jsx("button",{type:"submit",disabled:O||!z.trim(),className:"flex-1 py-4 bg-emerald-600 text-white rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-xl shadow-emerald-500/20 hover:bg-emerald-700 transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:O?e.jsx(D,{size:16,className:"animate-spin"}):s?"تایید بازگشایی":"Confirm Unlock"})]})]})]})})}),p&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white rounded-[2rem] shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",dir:s?"rtl":"ltr",children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-50 text-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:e.jsx(v,{size:32})}),e.jsx("h2",{className:"text-xl font-black text-slate-800 uppercase tracking-tight mb-2",children:s?"تایید قفل کردن روز":"Confirm Day Lock"}),e.jsx("p",{className:"text-xs font-medium text-slate-400 mb-4 px-4",children:s?"قفل کردن روز از تغییرات تصادفی جلوگیری می‌کند.":"Locking a day prevents accidental historical modifications."}),e.jsxs("div",{className:"mb-8 p-3 bg-slate-50 rounded-xl text-[10px] font-black uppercase tracking-widest text-slate-500",children:[p.dates.length," ",s?"روز برای قفل شناسایی شد":"Dates Identified for Lock"]}),e.jsxs("form",{onSubmit:Ne,className:"space-y-6",children:[h&&e.jsx("div",{className:"p-3 bg-rose-50 text-rose-600 text-[10px] font-black uppercase rounded-lg",children:h}),e.jsx("textarea",{required:!0,rows:3,className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm outline-none focus:ring-4 focus:ring-blue-500/10 focus:border-blue-300",value:C,onChange:t=>Y(t.target.value),placeholder:s?"توضیح عملیاتی برای قفل کردن...":"Operational explanation for locking..."}),e.jsxs("div",{className:"flex gap-3 px-4",children:[e.jsx("button",{type:"button",onClick:()=>E(null),className:"flex-1 py-4 border border-slate-200 rounded-2xl text-[10px] font-black uppercase tracking-widest text-slate-500",children:n.cancel}),e.jsx("button",{type:"submit",disabled:Z||!C.trim(),className:"flex-1 py-4 bg-blue-600 text-white rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-xl shadow-blue-500/20 hover:bg-blue-700 transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:Z?e.jsx(D,{size:16,className:"animate-spin"}):s?"تایید قفل":"Confirm Lock"})]})]})]})})}),o&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-[2rem] shadow-2xl w-full max-w-lg overflow-hidden animate-in zoom-in-95 duration-200",dir:s?"rtl":"ltr",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-slate-800 uppercase tracking-tight",children:s?"ویرایش تراکنش":"Edit Transaction"}),L(o)&&e.jsxs("p",{className:"text-[9px] font-black text-amber-600 uppercase tracking-widest mt-1 flex items-center gap-1",children:[e.jsx(v,{size:10})," ",s?"این ثبت محافظت شده است و به طور خودکار باز خواهد شد.":"This record is protected and will be auto-unlocked."]})]}),e.jsx("button",{onClick:()=>b(null),className:"p-2 hover:bg-slate-100 rounded-full text-slate-400",children:e.jsx(J,{size:20})})]}),e.jsxs("form",{onSubmit:be,className:"p-8 space-y-6",children:[h&&e.jsxs("div",{className:"p-4 bg-rose-50 text-rose-600 text-xs font-black uppercase rounded-xl border border-rose-100 flex items-center gap-3",children:[e.jsx(Ce,{size:14})," ",h]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[n.quantity," (",n[o.unit]||o.unit,")"]}),e.jsx("input",{type:"number",required:!0,className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm font-bold outline-none focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 transition-all shadow-sm",value:o.quantity,onChange:t=>b({...o,quantity:Number(t.target.value)})})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:s?"علت":"Reason"}),e.jsx("select",{className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm font-bold outline-none focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 transition-all shadow-sm",value:o.reason,onChange:t=>b({...o,reason:t.target.value}),children:Ye[o.type].map(t=>e.jsx("option",{value:t,children:n[t]||t},t))})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:s?"یادداشت‌های بازرسی":"Audit Notes"}),e.jsx("textarea",{rows:3,className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm outline-none focus:ring-4 focus:ring-blue-500/10",value:o.notes||"",onChange:t=>b({...o,notes:t.target.value}),placeholder:s?"توضیح دهید چرا این تغییر انجام می‌شود...":"Explain why this change is being made..."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>b(null),className:"flex-1 py-4 border border-slate-200 rounded-2xl text-[10px] font-black uppercase tracking-widest text-slate-500",children:n.cancel}),e.jsx("button",{type:"submit",disabled:F,className:"flex-1 py-4 bg-blue-600 text-white rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-xl shadow-blue-500/20 hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:F?e.jsx(D,{size:16,className:"animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(Me,{size:16})," ",s?"ذخیره تغییرات":"Save Changes"]})})]})]})]})}),_&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white rounded-[2rem] shadow-2xl w-full max-md overflow-hidden animate-in zoom-in-95 duration-200",dir:s?"rtl":"ltr",children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-rose-50 text-rose-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:e.jsx(te,{size:32})}),e.jsx("h2",{className:"text-xl font-black text-slate-800 uppercase tracking-tight mb-2",children:s?"تایید حذف تراکنش":"Confirm Movement Deletion"}),e.jsx("p",{className:"text-xs font-medium text-slate-400 mb-4 px-4",children:s?"این عملیات دائمی بوده و تمامی محاسبات مرتبط را تحت تاثیر قرار می‌دهد. ارائه دلیل الزامی است.":"This action is irreversible and affects all derived analytics. Providing a reason is mandatory."}),e.jsxs("form",{onSubmit:ge,className:"space-y-6",children:[h&&e.jsx("div",{className:"p-3 bg-rose-50 text-rose-600 text-[10px] font-black uppercase rounded-lg",children:h}),e.jsx("textarea",{required:!0,rows:3,className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm outline-none focus:ring-4 focus:ring-rose-500/10 focus:border-rose-300",value:S,onChange:t=>W(t.target.value),placeholder:s?"علت حذف برای بازرسی...":"Reason for deletion for audit..."}),e.jsxs("div",{className:"flex gap-3 px-4",children:[e.jsx("button",{type:"button",onClick:()=>T(null),className:"flex-1 py-4 border border-slate-200 rounded-2xl text-[10px] font-black uppercase tracking-widest text-slate-500",children:n.cancel}),e.jsx("button",{type:"submit",disabled:B||!S.trim(),className:"flex-1 py-4 bg-rose-600 text-white rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-xl shadow-rose-500/20 hover:bg-rose-700 transition-all flex items-center justify-center gap-2",children:B?e.jsx(D,{size:16,className:"animate-spin"}):s?"تایید حذف":"Confirm Delete"})]})]})]})})})]})};export{it as default};
