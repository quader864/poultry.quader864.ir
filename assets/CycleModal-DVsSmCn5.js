import{c as j,r as a,j as e,C as N,X as y,L as v}from"./index-BqfCj9Cx.js";import{I as u}from"./info-BRptETED.js";import{C as w}from"./calendar-BSOwSEYW.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],P=j("pen-line",k),I=({flockId:l,onClose:n,onSuccess:m,api:p,t:C,isRtl:t})=>{const[i,b]=a.useState(new Date().getFullYear()),[c,g]=a.useState(1),[o,d]=a.useState(!1),[x,r]=a.useState(""),f=async s=>{if(s.preventDefault(),!l||l==="all")return r("Please select a valid flock first.");d(!0),r("");try{await p.createCycle(l,{year:i,n:c}),m()}catch(h){r(h.message||"Provisioning failed")}finally{d(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-md z-[200] flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-2xl w-full max-w-lg overflow-hidden animate-in zoom-in-95 duration-300",dir:t?"rtl":"ltr",children:[e.jsxs("div",{className:"p-8 border-b border-slate-100 flex items-center justify-between bg-slate-50/50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 text-white rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(N,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-slate-900 uppercase tracking-tighter",children:t?"شروع دوره جدید":"Initiate New Cycle"}),e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mt-1",children:"Lifecycle Provisioning Protocol"})]})]}),e.jsx("button",{onClick:n,className:"p-2 text-slate-400 hover:text-rose-500 transition-colors",children:e.jsx(y,{size:24})})]}),e.jsxs("form",{onSubmit:f,className:"p-8 space-y-8",children:[x&&e.jsxs("div",{className:"p-4 bg-rose-50 border border-rose-100 rounded-2xl text-rose-600 text-xs font-black uppercase flex items-center gap-3",children:[e.jsx(u,{size:16})," ",x]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:t?"سال شمسی":"Calendar Year"}),e.jsx("input",{type:"number",className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-6 py-4 text-lg font-black tabular-nums focus:ring-8 focus:ring-blue-500/5 outline-none",value:i,onChange:s=>b(Number(s.target.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:t?"شماره دوره (N)":"Sequence No (N)"}),e.jsx("input",{type:"number",className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-6 py-4 text-lg font-black tabular-nums focus:ring-8 focus:ring-blue-500/5 outline-none",value:c,onChange:s=>g(Number(s.target.value))})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-100 p-5 rounded-[1.5rem] flex items-start gap-4",children:[e.jsx(u,{className:"text-blue-600 shrink-0",size:20}),e.jsx("p",{className:"text-[11px] font-medium text-blue-700 leading-relaxed",children:t?"شناسه دوره به صورت ترکیبی (سال-شماره) در سیستم ثبت می‌شود. شروع دوره جدید به صورت خودکار باعث فعال‌سازی تله‌متری می‌شود.":"Cycle ID will be registered as (Year-N). Initiating a new cycle activates node telemetry automatically."})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:n,className:"flex-1 py-4 text-[10px] font-black uppercase tracking-widest text-slate-400 hover:text-slate-600",children:t?"انصراف":"Cancel"}),e.jsx("button",{disabled:o,type:"submit",className:"flex-[2] py-4 bg-blue-600 text-white rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-xl shadow-blue-500/20 hover:bg-blue-700 transition-all flex items-center justify-center gap-3",children:o?e.jsx(v,{size:16,className:"animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(w,{size:16})," Confirm Activation"]})})]})]})]})})};export{I as C,P};
