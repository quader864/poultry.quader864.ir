import{r as a,j as e,a as y,Z as b,L as C,U as u,k as S}from"./index-D-P-TEXt.js";import{A as n}from"./types-ajuHBdeq.js";import{C as z}from"./circle-check-DxqNuXWi.js";import{C as g}from"./clock-Cu403Q11.js";import{T as A}from"./trending-up-BYFYVXzO.js";import{E as T}from"./ellipsis-vertical-B_C3eS-Y.js";import{M as L}from"./message-square-CZ56QWa1.js";const H=({api:r,t:f})=>{const[d,j]=a.useState([]),[N,o]=a.useState(!0),[i,v]=a.useState("all"),[t,x]=a.useState(null),[w,p]=a.useState(!1);f.langToggle;const c=async()=>{o(!0);try{const s=await r.getIncidents();j(s.data||[])}catch(s){console.error("Incident sync failed",s)}finally{o(!1)}};a.useEffect(()=>{c()},[r]);const k=async s=>{if(t){p(!0);try{const l=await r.updateIncidentStatus(t._id,s,"Manual override via Operator Panel");x(l),await c()}catch{alert("Failed to update lifecycle status")}finally{p(!1)}}},m=i==="all"?d:d.filter(s=>s.status===i),h=s=>{switch(s){case n.CRITICAL:return"bg-rose-500";case n.HIGH:return"bg-orange-500";case n.MEDIUM:return"bg-amber-500";default:return"bg-blue-500"}};return e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 animate-in fade-in duration-700 pb-20",children:[e.jsx("div",{className:"w-full lg:w-96 flex flex-col gap-6",children:e.jsxs("div",{className:"bg-white border border-slate-200 rounded-[2.5rem] p-8 shadow-sm flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(y,{className:"text-blue-600",size:24}),e.jsx("h2",{className:"text-xl font-black text-slate-900 uppercase tracking-tight",children:"Active Duty"})]}),e.jsx("button",{onClick:c,className:"p-2 text-slate-400 hover:text-blue-600 transition-colors",children:e.jsx(b,{size:18})})]}),e.jsx("div",{className:"flex bg-slate-50 p-1 rounded-xl mb-6 shrink-0 overflow-x-auto no-scrollbar",children:["all","detected","investigating","resolved"].map(s=>e.jsx("button",{onClick:()=>v(s),className:`flex-1 py-2 rounded-lg text-[9px] font-black uppercase tracking-widest transition-all whitespace-nowrap px-4 ${i===s?"bg-slate-900 text-white shadow-lg":"text-slate-400 hover:text-slate-600"}`,children:s},s))}),e.jsx("div",{className:"space-y-3",children:N?e.jsxs("div",{className:"py-20 flex flex-col items-center opacity-30 gap-4",children:[e.jsx(C,{size:32,className:"animate-spin"}),e.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest text-center",children:"Syncing Action Center..."})]}):m.length===0?e.jsxs("div",{className:"py-20 text-center opacity-20 flex flex-col items-center gap-4",children:[e.jsx(z,{size:48}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest",children:"Horizon Clear"})]}):m.map(s=>e.jsxs("div",{onClick:()=>x(s),className:`p-5 rounded-[2rem] border transition-all cursor-pointer group ${(t==null?void 0:t._id)===s._id?"bg-slate-900 text-white border-slate-900 shadow-2xl":"bg-white border-slate-100 hover:border-blue-200 shadow-sm"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${h(s.severity)}`}),e.jsx("span",{className:`text-[8px] font-black uppercase tracking-widest ${(t==null?void 0:t._id)===s._id,"text-slate-400"}`,children:s.status})]}),e.jsxs("span",{className:"text-[8px] font-mono opacity-50",children:["#",s._id.slice(-6).toUpperCase()]})]}),e.jsx("h4",{className:"text-sm font-black uppercase tracking-tight line-clamp-1",children:s.title}),e.jsxs("div",{className:"mt-4 flex items-center justify-between opacity-60",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{size:12}),e.jsx("span",{className:"text-[9px] font-bold",children:new Date(s.createdAt).toLocaleTimeString()})]}),e.jsx(u,{size:12})]})]},s._id))})]})}),e.jsx("div",{className:"flex-1",children:t?e.jsxs("div",{className:"bg-white border border-slate-200 rounded-[3.5rem] shadow-sm flex flex-col overflow-hidden animate-in slide-in-from-right-8 duration-500",children:[e.jsxs("div",{className:"p-10 lg:p-14 border-b border-slate-100 bg-slate-50/50 flex flex-col md:flex-row justify-between items-start md:items-center gap-8 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx("div",{className:`w-20 h-20 rounded-3xl flex items-center justify-center shadow-2xl text-white ${h(t.severity)}`,children:e.jsx(S,{size:32})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("h2",{className:"text-3xl font-black text-slate-900 uppercase tracking-tighter leading-none",children:t.title}),e.jsxs("span",{className:"px-4 py-1.5 bg-white border border-slate-200 rounded-xl text-[10px] font-black uppercase tracking-widest text-slate-500",children:["Priority: ",t.priority]})]}),e.jsxs("p",{className:"text-xs font-black text-slate-400 uppercase tracking-[0.4em]",children:["Node Assignment: ",t.assignedTo||"Unassigned Node"]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:["investigating","action_required","resolved"].map(s=>e.jsx("button",{onClick:()=>k(s),disabled:w,className:`px-6 py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all ${t.status===s?"bg-blue-600 text-white shadow-xl":"bg-white border border-slate-200 text-slate-600 hover:bg-slate-100"}`,children:s==="action_required"?"Alert Staff":s},s))})]}),e.jsxs("div",{className:"p-10 lg:p-14 flex flex-col lg:flex-row gap-14",children:[e.jsxs("div",{className:"flex-1 space-y-10",children:[e.jsxs("div",{className:"flex items-center gap-4 text-slate-900 font-black uppercase text-xs tracking-[0.3em] border-b border-slate-100 pb-6",children:[e.jsx(g,{size:20,className:"text-blue-600"})," Operational Timeline"]}),e.jsxs("div",{className:"relative space-y-10",children:[e.jsx("div",{className:"absolute left-6 top-0 bottom-0 w-px bg-slate-100"}),t.timeline.map((s,l)=>e.jsxs("div",{className:"relative pl-16 group",children:[e.jsx("div",{className:"absolute left-[21px] top-0 w-2.5 h-2.5 rounded-full bg-slate-200 border-2 border-white group-hover:bg-blue-500 transition-colors"}),e.jsxs("div",{className:"bg-slate-50 border border-slate-100 rounded-2xl p-6 group-hover:bg-white group-hover:border-blue-200 group-hover:shadow-lg transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"text-[10px] font-black text-slate-900 uppercase tracking-widest underline decoration-blue-500/30",children:s.action}),e.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase tabular-nums",children:new Date(s.timestamp).toLocaleString()})]}),e.jsxs("p",{className:"text-sm font-medium text-slate-600 leading-relaxed italic",children:['"',s.details,'"']}),e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-[9px] font-black text-slate-400 uppercase tracking-widest",children:[e.jsx(u,{size:10})," ",s.by]})]})]},l))]})]}),e.jsxs("div",{className:"w-full lg:w-80 space-y-8 shrink-0",children:[e.jsxs("div",{className:"bg-slate-900 rounded-[2.5rem] p-8 text-white relative overflow-hidden shadow-2xl",children:[e.jsx("div",{className:"absolute top-0 right-0 p-6 opacity-5",children:e.jsx(A,{size:80})}),e.jsxs("h4",{className:"text-xs font-black uppercase tracking-[0.2em] mb-6 flex items-center gap-3 relative z-10",children:[e.jsx(b,{size:16,className:"text-blue-400"})," Resolution Pulse"]}),e.jsxs("div",{className:"space-y-6 relative z-10",children:[e.jsxs("div",{className:"p-5 bg-white/5 rounded-2xl border border-white/5",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-3",children:"Target MTTR"}),e.jsx("p",{className:"text-2xl font-black tabular-nums tracking-tighter",children:"4.0 Hours"})]}),e.jsxs("div",{className:"p-5 bg-white/5 rounded-2xl border border-white/5",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-3",children:"Current Aging"}),e.jsx("p",{className:"text-2xl font-black tabular-nums tracking-tighter text-rose-400",children:"12.5 Hours"})]})]})]}),e.jsxs("div",{className:"bg-slate-50 border border-slate-100 rounded-[2.5rem] p-8",children:[e.jsx("h4",{className:"text-[10px] font-black text-slate-900 uppercase tracking-widest mb-6",children:"Staff Deployment"}),e.jsx("div",{className:"space-y-4",children:["Farm Manager","Lead Vet","Operations"].map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-xl border border-slate-200 group hover:border-blue-500 transition-all cursor-pointer shadow-sm",children:[e.jsx("span",{className:"text-[11px] font-bold text-slate-700 uppercase",children:s}),e.jsx(T,{size:14,className:"text-slate-300"})]},s))})]})]})]})]}):e.jsxs("div",{className:"bg-white border border-slate-200 border-dashed rounded-[3.5rem] flex flex-col items-center justify-center text-center p-20 opacity-40",children:[e.jsx(L,{size:80,strokeWidth:1,className:"text-slate-300 mb-8"}),e.jsx("h3",{className:"text-2xl font-black text-slate-800 uppercase tracking-widest mb-2",children:"Select Command Context"}),e.jsx("p",{className:"text-sm font-bold text-slate-400 uppercase tracking-[0.2em]",children:"Bridge analytics to action via incident triaging"})]})})]})};export{H as default};
