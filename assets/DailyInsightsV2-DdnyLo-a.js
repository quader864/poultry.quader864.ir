import{c as C,r as p,j as e,g as N,L as O,B as E,Z as y,A as V}from"./index-BqfCj9Cx.js";import{P as B}from"./PerformanceOverview-8VYa194-.js";import{P as I}from"./package-BkE9y1L1.js";import{T as F}from"./trending-up-uU0_5pp5.js";import{C as H}from"./clock-VS24zUjI.js";import"./AreaChart-CkTg_hPv.js";import"./Line-HKKgAyfc.js";import"./chart-column-BpoMgOJ7.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],G=C("arrow-down-right",M),q=({flockId:a,api:r,t:w,isRtl:k})=>{var c,b,d,f,o,j;const[h,z]=p.useState(null),[u,D]=p.useState(null),[S,g]=p.useState(!1);if(p.useEffect(()=>{(async()=>{if(r.isValidObjectId(a)){g(!0);try{const t=new Date,l=new Date;l.setDate(t.getDate()-7);const v=P=>P.toISOString().split("T")[0],[x,m]=await Promise.all([r.getDailyAnalyticsV2(a),r.getTrendsV2(a,{metrics:"birds,feed,eggs",startDate:v(l),endDate:v(t)})]);z((x==null?void 0:x.data)||x),D((m==null?void 0:m.data)||m)}catch(t){console.error(t)}finally{g(!1)}}})()},[a,r]),!r.isValidObjectId(a))return e.jsxs("div",{className:"h-[40vh] flex flex-col items-center justify-center text-slate-400 opacity-40",children:[e.jsx(N,{size:64,strokeWidth:1}),e.jsx("p",{className:"mt-4 text-[10px] font-black uppercase tracking-[0.4em]",children:"Anchor to a specific node for Real-time Telemetry"})]});if(S)return e.jsxs("div",{className:"h-[60vh] flex flex-col items-center justify-center opacity-40",children:[e.jsx(O,{size:48,className:"animate-spin text-blue-600 mb-6"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.4em]",children:"Establishing Signal Link..."})]});if(!h)return null;const i=h.aggregated||{},n=u&&u.metrics?u.metrics:{},A=Array.isArray(n.eggs)?n.eggs:[],L=Array.isArray(n.birds)?n.birds:[],T=A.map((s,t)=>{var l;return{day:t+1,growth:s.value,mortality:(((l=L[t])==null?void 0:l.value)||0)/10}});return e.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white border border-slate-200 p-8 rounded-[2.5rem] shadow-sm hover:shadow-xl transition-all group",children:[e.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-[0.2em] mb-4",children:"Total Census"}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsx("h4",{className:"text-4xl font-black text-slate-900 tabular-nums",children:((b=(c=i.totalBirds)==null?void 0:c.toLocaleString)==null?void 0:b.call(c))||"0"}),e.jsx("div",{className:"w-10 h-10 bg-blue-50 text-blue-600 rounded-xl flex items-center justify-center group-hover:rotate-6 transition-transform",children:e.jsx(E,{size:20})})]}),e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-[9px] font-bold text-rose-500 uppercase",children:[e.jsx(G,{size:12})," ",i.mortalityRate||"0","% Baseline Loss"]})]}),e.jsxs("div",{className:"bg-white border border-slate-200 p-8 rounded-[2.5rem] shadow-sm hover:shadow-xl transition-all group",children:[e.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-[0.2em] mb-4",children:"Feed Ingestion"}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsx("h4",{className:"text-4xl font-black text-slate-900 tabular-nums",children:((f=(d=i.totalFeed)==null?void 0:d.toLocaleString)==null?void 0:f.call(d))||"0"}),e.jsx("div",{className:"w-10 h-10 bg-amber-50 text-amber-600 rounded-xl flex items-center justify-center group-hover:rotate-6 transition-transform",children:e.jsx(I,{size:20})})]}),e.jsx("div",{className:"mt-4 flex items-center gap-2 text-[9px] font-bold text-slate-400 uppercase",children:"KG Consumed / 24H"})]}),e.jsxs("div",{className:"bg-white border border-slate-200 p-8 rounded-[2.5rem] shadow-sm hover:shadow-xl transition-all group",children:[e.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-[0.2em] mb-4",children:"Production Yield"}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsx("h4",{className:"text-4xl font-black text-slate-900 tabular-nums",children:((j=(o=i.totalEggs)==null?void 0:o.toLocaleString)==null?void 0:j.call(o))||"0"}),e.jsx("div",{className:"w-10 h-10 bg-emerald-50 text-emerald-600 rounded-xl flex items-center justify-center group-hover:rotate-6 transition-transform",children:e.jsx(N,{size:20})})]}),e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-[9px] font-bold text-emerald-500 uppercase",children:[e.jsx(F,{size:12})," Cycle Growth Active"]})]}),e.jsxs("div",{className:"bg-slate-900 text-white p-8 rounded-[2.5rem] shadow-2xl relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:scale-110 transition-transform",children:e.jsx(y,{size:80})}),e.jsx("p",{className:"text-[9px] font-black text-slate-500 uppercase tracking-[0.2em] mb-4 relative z-10",children:"Integrity Pulse"}),e.jsxs("div",{className:"flex items-end justify-between relative z-10",children:[e.jsx("h4",{className:"text-4xl font-black text-blue-400 uppercase tracking-tighter",children:"Nominal"}),e.jsx("div",{className:"w-10 h-10 bg-white/10 text-white rounded-xl flex items-center justify-center animate-pulse",children:e.jsx(V,{size:20})})]}),e.jsx("p",{className:"mt-4 text-[9px] font-bold text-slate-500 uppercase tracking-widest relative z-10",children:"Sync Interval: 120s"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[e.jsx("div",{className:"xl:col-span-2",children:e.jsx(B,{t:w,isRtl:k,data:T})}),e.jsxs("div",{className:"bg-white border border-slate-200 rounded-[3rem] p-10 shadow-sm flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("h4",{className:"text-xs font-black text-slate-900 uppercase tracking-widest flex items-center gap-3",children:[e.jsx(y,{size:16,className:"text-blue-600"})," System Metrics"]}),e.jsx(H,{size:16,className:"text-slate-300"})]}),e.jsx("div",{className:"space-y-6 flex-1",children:[{label:"Fleet Latency",value:"14ms",status:"Optimal"},{label:"Data Drift",value:"0.002%",status:"Safe"},{label:"Uplink Health",value:"99.9%",status:"Stable"}].map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-5 bg-slate-50 rounded-2xl border border-slate-100 group hover:border-blue-300 transition-all",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest mb-1",children:s.label}),e.jsx("p",{className:"text-sm font-black text-slate-800",children:s.value})]}),e.jsx("span",{className:`px-3 py-1 rounded-lg text-[8px] font-black uppercase tracking-widest ${s.status==="Optimal"?"bg-emerald-50 text-emerald-600":s.status==="Safe"?"bg-blue-50 text-blue-600":"bg-slate-50 text-slate-400"}`,children:s.status})]},t))})]})]})]})};export{q as default};
