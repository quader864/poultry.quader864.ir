import{c as S,r as c,j as e,g,L,B as T,Z as f,A}from"./index-Boji9h6s.js";import{P}from"./PerformanceOverview-CRVT1JGb.js";import{P as C}from"./package-XmwZcQ4r.js";import{T as O}from"./trending-up-CyoQ3ryj.js";import{C as R}from"./clock-DTECff2T.js";import"./AreaChart-DwytzUVa.js";import"./chart-column-ChMpnPDV.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],E=S("arrow-down-right",V),Z=({flockId:a,api:l,t:j,isRtl:v})=>{var x,m,p,u,h;const[d,N]=c.useState(null),[i,w]=c.useState(null),[y,o]=c.useState(!1);if(c.useEffect(()=>{(async()=>{if(l.isValidObjectId(a)){o(!0);try{const t=new Date,r=new Date;r.setDate(t.getDate()-7);const b=z=>z.toISOString().split("T")[0],[k,D]=await Promise.all([l.getDailyAnalyticsV2(a),l.getTrendsV2(a,{metrics:"birds,feed,eggs",startDate:b(r),endDate:b(t)})]);N(k.data),w(D.data)}catch(t){console.error("V2 Daily sync failed",t)}finally{o(!1)}}})()},[a,l]),!l.isValidObjectId(a))return e.jsxs("div",{className:"h-[40vh] flex flex-col items-center justify-center text-slate-400 opacity-40",children:[e.jsx(g,{size:64,strokeWidth:1}),e.jsx("p",{className:"mt-4 text-[10px] font-black uppercase tracking-[0.4em]",children:"Anchor to a specific node for Real-time Telemetry"})]});if(y)return e.jsxs("div",{className:"h-[60vh] flex flex-col items-center justify-center opacity-40",children:[e.jsx(L,{size:48,className:"animate-spin text-blue-600 mb-6"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.4em]",children:"Establishing Signal Link..."})]});if(!d)return null;const n=d.aggregated||{};return e.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white border border-slate-200 p-8 rounded-[2.5rem] shadow-sm hover:shadow-xl transition-all group",children:[e.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-[0.2em] mb-4",children:"Total Census"}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsx("h4",{className:"text-4xl font-black text-slate-900 tabular-nums",children:((x=n.totalBirds)==null?void 0:x.toLocaleString())||"0"}),e.jsx("div",{className:"w-10 h-10 bg-blue-50 text-blue-600 rounded-xl flex items-center justify-center group-hover:rotate-6 transition-transform",children:e.jsx(T,{size:20})})]}),e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-[9px] font-bold text-rose-500 uppercase",children:[e.jsx(E,{size:12})," ",n.mortalityRate||"0","% Baseline Loss"]})]}),e.jsxs("div",{className:"bg-white border border-slate-200 p-8 rounded-[2.5rem] shadow-sm hover:shadow-xl transition-all group",children:[e.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-[0.2em] mb-4",children:"Feed Ingestion"}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsx("h4",{className:"text-4xl font-black text-slate-900 tabular-nums",children:((m=n.totalFeed)==null?void 0:m.toLocaleString())||"0"}),e.jsx("div",{className:"w-10 h-10 bg-amber-50 text-amber-600 rounded-xl flex items-center justify-center group-hover:rotate-6 transition-transform",children:e.jsx(C,{size:20})})]}),e.jsx("div",{className:"mt-4 flex items-center gap-2 text-[9px] font-bold text-slate-400 uppercase",children:"KG Consumed / 24H"})]}),e.jsxs("div",{className:"bg-white border border-slate-200 p-8 rounded-[2.5rem] shadow-sm hover:shadow-xl transition-all group",children:[e.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-[0.2em] mb-4",children:"Production Yield"}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsx("h4",{className:"text-4xl font-black text-slate-900 tabular-nums",children:((p=n.totalEggs)==null?void 0:p.toLocaleString())||"0"}),e.jsx("div",{className:"w-10 h-10 bg-emerald-50 text-emerald-600 rounded-xl flex items-center justify-center group-hover:rotate-6 transition-transform",children:e.jsx(g,{size:20})})]}),e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-[9px] font-bold text-emerald-500 uppercase",children:[e.jsx(O,{size:12})," Cycle Growth Active"]})]}),e.jsxs("div",{className:"bg-slate-900 text-white p-8 rounded-[2.5rem] shadow-2xl relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:scale-110 transition-transform",children:e.jsx(f,{size:80})}),e.jsx("p",{className:"text-[9px] font-black text-slate-500 uppercase tracking-[0.2em] mb-4 relative z-10",children:"Integrity Pulse"}),e.jsxs("div",{className:"flex items-end justify-between relative z-10",children:[e.jsx("h4",{className:"text-4xl font-black text-blue-400 uppercase tracking-tighter",children:"Nominal"}),e.jsx("div",{className:"w-10 h-10 bg-white/10 text-white rounded-xl flex items-center justify-center animate-pulse",children:e.jsx(A,{size:20})})]}),e.jsx("p",{className:"mt-4 text-[9px] font-bold text-slate-500 uppercase tracking-widest relative z-10",children:"Sync Interval: 120s"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[e.jsx("div",{className:"xl:col-span-2",children:e.jsx(P,{t:j,isRtl:v,data:(h=(u=i==null?void 0:i.metrics)==null?void 0:u.eggs)==null?void 0:h.map((s,t)=>{var r;return{day:t+1,growth:s.value,mortality:((r=i.metrics.birds[t])==null?void 0:r.value)/10}})})}),e.jsxs("div",{className:"bg-white border border-slate-200 rounded-[3rem] p-10 shadow-sm flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("h4",{className:"text-xs font-black text-slate-900 uppercase tracking-widest flex items-center gap-3",children:[e.jsx(f,{size:16,className:"text-blue-600"})," System Metrics"]}),e.jsx(R,{size:16,className:"text-slate-300"})]}),e.jsx("div",{className:"space-y-6 flex-1",children:[{label:"Fleet Latency",value:"14ms",status:"Optimal"},{label:"Data Drift",value:"0.002%",status:"Safe"},{label:"Uplink Health",value:"99.9%",status:"Stable"}].map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-5 bg-slate-50 rounded-2xl border border-slate-100 group hover:border-blue-300 transition-all",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest mb-1",children:s.label}),e.jsx("p",{className:"text-sm font-black text-slate-800",children:s.value})]}),e.jsx("span",{className:`px-3 py-1 rounded-lg text-[8px] font-black uppercase tracking-widest ${s.status==="Optimal"?"bg-emerald-50 text-emerald-600":s.status==="Safe"?"bg-blue-50 text-blue-600":"bg-slate-50 text-slate-400"}`,children:s.status})]},t))}),e.jsx("div",{className:"mt-10 pt-8 border-t border-slate-50",children:e.jsx("button",{className:"w-full py-4 bg-slate-900 text-white rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-xl hover:bg-black transition-all",children:"Download Daily Audit"})})]})]})]})};export{Z as default};
