import{c as u,r as n,j as e,a as N,X as Q,R as ye,U as ke,L as S,C as ve,D as G,B as we}from"./index-BC-RvOu-.js";import{L as J}from"./lock-open-CSGV9tgq.js";import{S as Se}from"./search-BQzLMHWd.js";import{D as ze,T as K}from"./trash-2-BCV2i7wO.js";import{T as Ce}from"./tag-CYvZVkGI.js";import{F as _e,S as Le}from"./save-CmfIntC5.js";import{U as De}from"./utensils-crossed-CF9U5tp8.js";import{D as Re}from"./dollar-sign-D52pBjhf.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],$e=u("arrow-down-left",Me);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Ie=u("arrow-up-right",Ee);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Ae=u("funnel",Te);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Ue=u("info",qe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Be=u("pen",Fe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Z=u("square-check-big",Pe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],ee=u("square",Oe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],He=u("trending-down",Ve),We={in:["purchase","transfer_in","return","adjustment"],out:["sale_domestic","sale_export","transfer_out","adjustment"],sale:["sale_domestic","sale_export","adjustment"],mortality:["disease","feed","water","low_oxygen","temp_stress","injury","inspection","cleaning"],adjustment:["adjustment","inspection"]},tt=({movements:z,onSelectMovement:te,onUpdateMovement:se,onDeleteMovement:ae,onUnlockDays:M,onLockDays:$,userRole:le,capabilities:E,t:l})=>{const[f,ne]=n.useState(""),[m,re]=n.useState("all"),[C,ie]=n.useState(null),[o,g]=n.useState(new Set),[r,h]=n.useState(null),[_,L]=n.useState(null),[d,D]=n.useState(null),[y,R]=n.useState(null),[I,T]=n.useState(!1),[A,q]=n.useState(!1),[U,F]=n.useState(!1),[B,P]=n.useState(!1),[k,O]=n.useState(""),[v,V]=n.useState(""),[w,H]=n.useState(""),[x,p]=n.useState(""),[W,b]=n.useState(null),ce=le==="Admin"||E.includes("manage_system"),oe=E.includes("adjust_inventory"),s=l.langToggle==="EN",j=z.filter(t=>{var c,i,X,Y;return((c=t.notes)==null?void 0:c.toLowerCase().includes(f.toLowerCase()))||((i=t.reason)==null?void 0:i.toLowerCase().includes(f.toLowerCase()))||((X=t.source)==null?void 0:X.toLowerCase().includes(f.toLowerCase()))||((Y=t.supplier)==null?void 0:Y.toLowerCase().includes(f.toLowerCase()))?m==="all"?!0:m==="birds"?t.unit==="birds":m==="food"?t.unit==="kg"||t.reason==="feed":m==="losses"?t.type==="mortality":m==="sales"?t.type==="sale":!0:!1}),de=t=>{ie(C===t?null:t)},xe=()=>{o.size===j.length?g(new Set):g(new Set(j.map(t=>t._id))),b(null)},pe=(t,a)=>{a.stopPropagation(),b(null);const c=new Set(o);c.has(t)?c.delete(t):c.add(t),g(c)},ue=async t=>{if(t.preventDefault(),!!r){T(!0),p("");try{await se(r._id,{quantity:Number(r.quantity),reason:r.reason,notes:r.notes||""}),h(null)}catch(a){p(a.message||"Edit failed")}finally{T(!1)}}},me=async t=>{if(t.preventDefault(),!(!_||!k.trim())){q(!0),p("");try{await ae(_,k),L(null),O("")}catch(a){p(a.message||"Delete failed")}finally{q(!1)}}},he=async t=>{if(t.preventDefault(),!(!d||!v.trim()||!M)){F(!0),p("");try{await M(d.flockId,d.dates,v),D(null),V(""),g(new Set)}catch(a){p(a.message||"Unlock failed")}finally{F(!1)}}},be=async t=>{if(t.preventDefault(),!(!y||!w.trim()||!$)){P(!0),p("");try{await $(y.flockId,(d==null?void 0:d.dates)||[],w),R(null),H(""),g(new Set)}catch(a){p(a.message||"Lock failed")}finally{P(!1)}}},fe=()=>{const t=z.filter(i=>o.has(i._id)&&i.locked);if(t.length===0){b(s?"هیچ مورد قفل شده‌ای برای بازگشایی انتخاب نشده است.":"No locked items selected for unlocking.");return}const a=t[0].flockId,c=Array.from(new Set(t.map(i=>i.date.split("T")[0])));D({flockId:a,dates:c}),b(null)},ge=()=>{const t=z.filter(i=>o.has(i._id)&&!i.locked);if(t.length===0){b(s?"هیچ مورد بازی برای قفل کردن انتخاب نشده است.":"No open items selected for locking.");return}const a=t[0].flockId,c=Array.from(new Set(t.map(i=>i.date.split("T")[0])));R({flockId:a,dates:c}),b(null)},je=[{id:"all",label:s?"همه موارد":"All Entries",icon:e.jsx(G,{size:14})},{id:"birds",label:s?"پرنده‌ها":"Birds",icon:e.jsx(we,{size:14})},{id:"food",label:s?"دان/جرم":"Feed/Mass",icon:e.jsx(De,{size:14})},{id:"losses",label:s?"تلفات":"Losses",icon:e.jsx(He,{size:14})},{id:"sales",label:s?"فروش":"Sales",icon:e.jsx(Re,{size:14})}],Ne=()=>e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 px-6 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-slate-50 text-slate-300 rounded-[2rem] flex items-center justify-center mb-6 shadow-inner",children:e.jsx(G,{size:40,strokeWidth:1.5})}),e.jsx("h3",{className:"text-lg font-black text-slate-800 uppercase tracking-tight",children:l.historicalVoid||"No Raw Data Found"}),e.jsx("p",{className:"text-xs font-medium text-slate-400 max-w-xs mt-2 leading-relaxed",children:f||m!=="all"?s?"هیچ موردی مطابق با جستجو و فیلترهای شما یافت نشد.":"No entries match your current search and filters.":s?"هر تراکنش فردی ثبت شده در پایگاه داده در اینجا ظاهر می‌شود.":"Every individual transaction recorded in the database will appear here."})]});return e.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl overflow-hidden shadow-sm flex flex-col h-full transition-all relative",dir:s?"rtl":"ltr",children:[o.size>0&&e.jsxs("div",{className:"absolute top-0 left-0 right-0 z-30 bg-slate-900 text-white p-3 flex items-center justify-between animate-in slide-in-from-top duration-300",children:[e.jsxs("div",{className:"flex items-center gap-4 px-4",children:[e.jsxs("span",{className:"text-[10px] font-black uppercase tracking-[0.2em]",children:[o.size," ",l.itemsSelected]}),W&&e.jsx("span",{className:"text-[10px] font-bold text-rose-400 uppercase bg-rose-400/10 px-3 py-1 rounded-lg border border-rose-400/20 animate-in fade-in zoom-in",children:W})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[ce&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:fe,className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all shadow-lg shadow-emerald-500/20 disabled:opacity-50",children:[e.jsx(J,{size:14})," ",l.unlockSelected]}),e.jsxs("button",{onClick:ge,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all shadow-lg shadow-blue-500/20 disabled:opacity-50",children:[e.jsx(N,{size:14})," ",l.lock]})]}),e.jsx("button",{onClick:()=>{g(new Set),b(null)},className:"p-2 hover:bg-white/10 rounded-xl transition-colors",children:e.jsx(Q,{size:18})})]})]}),e.jsxs("div",{className:"p-4 sm:p-5 border-b border-slate-100 flex flex-col gap-4 bg-slate-50/30",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"relative group flex-1 max-w-md",children:[e.jsx(Se,{className:`absolute ${s?"right-3":"left-3"} top-1/2 -translate-y-1/2 text-slate-400`,size:16}),e.jsx("input",{type:"text",placeholder:s?"جستجوی جابجایی‌های خام...":"Search raw movements...",className:`w-full ${s?"pr-10 pl-4":"pl-10 pr-4"} py-2.5 bg-white border border-slate-200 rounded-xl text-sm font-medium focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 transition-all`,value:f,onChange:t=>ne(t.target.value)})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{className:"p-2.5 text-slate-600 bg-white border border-slate-200 rounded-xl hover:bg-slate-50 shadow-sm transition-all flex items-center gap-2 text-xs font-bold",children:[e.jsx(ze,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:s?"خروجی داده خام":"EXPORT RAW"})]})})]}),e.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto no-scrollbar pb-1",children:[e.jsxs("div",{className:`flex items-center gap-2 ${s?"pl-4 border-l":"pr-4 border-r"} border-slate-200`,children:[e.jsx(Ae,{size:14,className:"text-slate-400"}),e.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:s?"فیلترها":"Filters"})]}),je.map(t=>e.jsxs("button",{onClick:()=>re(t.id),className:`whitespace-nowrap flex items-center gap-2 px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${m===t.id?"bg-slate-900 text-white shadow-lg shadow-slate-900/10":"bg-white border border-slate-200 text-slate-500 hover:border-slate-300"}`,children:[t.icon,t.label]},t.id))]})]}),j.length===0?e.jsx(Ne,{}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm border-collapse min-w-[1000px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:`bg-slate-50/80 text-slate-500 font-black border-b border-slate-200 uppercase tracking-widest text-[10px] ${s?"text-right":"text-left"}`,children:[e.jsx("th",{className:"px-6 py-4 w-12 text-center",children:e.jsx("button",{onClick:xe,className:"p-1 text-slate-400 hover:text-blue-600 transition-colors",children:o.size===j.length&&j.length>0?e.jsx(Z,{size:16,className:"text-blue-600"}):e.jsx(ee,{size:16})})}),e.jsx("th",{className:"px-6 py-4 w-16 text-center",children:s?"نوع":"Type"}),e.jsx("th",{className:"px-6 py-4",children:s?"زمان":"Timestamp"}),e.jsx("th",{className:"px-6 py-4",children:s?"دسته‌بندی":"Category"}),e.jsx("th",{className:"px-6 py-4",children:s?"مقدار":"Quantity"}),e.jsx("th",{className:"px-6 py-4",children:s?"منبع":"Source"}),e.jsx("th",{className:"px-6 py-4",children:s?"یادداشت":"Notes"}),e.jsx("th",{className:`px-6 py-4 ${s?"text-left":"text-right"}`,children:s?"عملیات":"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:j.map(t=>e.jsxs(ye.Fragment,{children:[e.jsxs("tr",{className:`hover:bg-blue-50/20 group cursor-pointer transition-all ${C===t._id?"bg-blue-50/30":""} ${o.has(t._id)?"bg-blue-50/50":""}`,onClick:()=>de(t._id),children:[e.jsx("td",{className:"px-6 py-4",onClick:a=>pe(t._id,a),children:e.jsx("div",{className:"flex justify-center",children:o.has(t._id)?e.jsx(Z,{size:16,className:"text-blue-600"}):e.jsx(ee,{size:16,className:"text-slate-200 group-hover:text-slate-400 transition-colors"})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${t.type==="in"?"bg-emerald-100 text-emerald-600":t.type==="mortality"?"bg-rose-100 text-rose-600":t.type==="sale"?"bg-blue-100 text-blue-600":"bg-amber-100 text-amber-600"}`,children:t.type==="in"?e.jsx($e,{size:16}):e.jsx(Ie,{size:16})})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold text-slate-900",children:new Date(t.date).toLocaleDateString(s?"fa-IR":"en-US")}),t.locked&&e.jsx("span",{title:`${l.locked}: ${t.lockedReason}`,children:e.jsx(N,{size:12,className:"text-amber-500"})})]}),e.jsx("span",{className:"text-[10px] text-slate-400 font-mono tracking-tighter",children:new Date(t.date).toLocaleTimeString(s?"fa-IR":"en-US",{hour:"2-digit",minute:"2-digit"})})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2.5 py-1 rounded-lg bg-slate-100 text-slate-600 text-[10px] font-black uppercase tracking-widest",children:l[t.reason]||t.reason})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("span",{className:`font-black tabular-nums text-sm ${t.type==="in"?"text-emerald-600":"text-rose-600"}`,children:[t.type==="in"?"+":"-",t.quantity.toLocaleString(s?"fa-IR":"en-US")]}),e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:l[t.unit]||t.unit})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"text-[11px] font-bold text-slate-600 uppercase flex items-center gap-1.5",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${t.source==="manual_entry"?"bg-blue-500":"bg-purple-500"}`}),l[t.source]||t.source.replace("_"," ")]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-xs text-slate-500 truncate max-w-[200px] italic",children:t.notes||"—"})}),e.jsx("td",{className:`px-6 py-4 ${s?"text-left":"text-right"}`,children:e.jsxs("div",{className:`flex items-center ${s?"justify-start":"justify-end"} gap-2`,children:[oe&&e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:a=>{a.stopPropagation(),h(t)},className:"p-1.5 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all",children:e.jsx(Be,{size:14,className:t.locked?"text-amber-500":""})}),e.jsx("button",{onClick:a=>{a.stopPropagation(),L(t._id)},className:"p-1.5 text-slate-400 hover:text-rose-600 hover:bg-rose-50 rounded-lg transition-all",children:e.jsx(K,{size:14,className:t.locked?"text-amber-500":""})})]}),e.jsx("button",{onClick:a=>{a.stopPropagation(),te(t._id)},className:"px-3 py-1.5 text-[10px] font-black uppercase tracking-widest text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-600 hover:text-white transition-all shadow-sm",children:s?"مشاهده":"VIEW"})]})})]}),C===t._id&&e.jsx("tr",{className:"bg-slate-50/50",children:e.jsx("td",{colSpan:8,className:"px-8 py-8 animate-in slide-in-from-top-2",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm",children:[e.jsxs("h4",{className:"text-[10px] font-black uppercase text-blue-600 mb-4 tracking-widest flex items-center gap-2",children:[e.jsx(Ue,{size:12})," ",s?"متادیتا ورودی":"Entry Metadata"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-xs font-medium text-slate-500",children:[e.jsx("span",{children:s?"شناسه منحصر به فرد":"Unique ID"}),e.jsxs("span",{className:"font-mono text-slate-400 text-[10px] uppercase",children:["#",t._id.slice(-8)]})]}),e.jsxs("div",{className:"flex justify-between text-xs font-medium text-slate-500",children:[e.jsx("span",{children:s?"ثبت شده توسط":"Recorded By"}),e.jsxs("span",{className:"font-bold text-slate-800 uppercase tracking-tighter flex items-center gap-1",children:[e.jsx(ke,{size:10})," ",t.recordedBy||(s?"سیستم":"System")]})]})]})]}),e.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm",children:[e.jsxs("h4",{className:"text-[10px] font-black uppercase text-amber-600 mb-4 tracking-widest flex items-center gap-2",children:[e.jsx(Ce,{size:12})," ",s?"اطلاعات تراکنش":"Transaction Info"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-xs font-medium text-slate-500",children:[e.jsx("span",{children:s?"تامین‌کننده":"Supplier"}),e.jsx("span",{className:"font-bold text-slate-900",children:t.supplier||(s?"نامشخص":"N/A")})]}),e.jsxs("div",{className:"flex justify-between text-xs font-medium text-slate-500",children:[e.jsx("span",{children:s?"وضعیت قفل":"Lock Status"}),e.jsx("span",{className:`font-bold text-[10px] uppercase tracking-tighter ${t.locked?"text-amber-600":"text-emerald-600"}`,children:t.locked?s?"محافظت شده":"Protected":s?"باز":"Open"})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 bg-white p-5 rounded-2xl border border-slate-200 shadow-sm",children:[e.jsxs("h4",{className:"text-[10px] font-black uppercase text-slate-400 mb-3 tracking-widest flex items-center gap-2",children:[e.jsx(_e,{size:12})," ",s?"پیام کامل لاگ":"Full Log Message"]}),e.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-100 min-h-[60px]",children:[e.jsx("p",{className:"text-sm text-slate-600 font-medium leading-relaxed",children:t.notes||(s?"هیچ مشاهده اضافی ثبت نشده است.":"No additional observations recorded.")}),t.locked&&e.jsxs("div",{className:"mt-4 p-2 bg-amber-50 border border-amber-100 rounded-lg flex items-center gap-2",children:[e.jsx(N,{size:12,className:"text-amber-600"}),e.jsxs("span",{className:"text-[9px] font-black text-amber-600 uppercase tracking-widest",children:[s?"قفل شده به دلیل:":"Locked for:"," ",t.lockedReason||(s?"محافظت سیستم":"System protection")]})]})]})]})]})})})]},t._id))})]})}),d&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white rounded-[2rem] shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",dir:s?"rtl":"ltr",children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-emerald-50 text-emerald-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:e.jsx(J,{size:32})}),e.jsx("h2",{className:"text-xl font-black text-slate-800 uppercase tracking-tight mb-2",children:l.unlockConfirm}),e.jsx("p",{className:"text-xs font-medium text-slate-400 mb-4 px-4",children:l.unlockDescription}),e.jsxs("div",{className:"mb-8 p-3 bg-slate-50 rounded-xl text-[10px] font-black uppercase tracking-widest text-slate-500",children:[d.dates.length," ",s?"روز برای بازگشایی شناسایی شد":"Dates Identified for Unlock"]}),e.jsxs("form",{onSubmit:he,className:"space-y-6",children:[x&&e.jsx("div",{className:"p-3 bg-rose-50 text-rose-600 text-[10px] font-black uppercase rounded-lg",children:x}),e.jsx("textarea",{required:!0,rows:3,className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm outline-none focus:ring-4 focus:ring-blue-500/10 focus:border-blue-300",value:v,onChange:t=>V(t.target.value),placeholder:s?"دلیل عملیاتی برای باز کردن قفل...":"Operational reason for unlock..."}),e.jsxs("div",{className:"flex gap-3 px-4",children:[e.jsx("button",{type:"button",onClick:()=>D(null),className:"flex-1 py-4 border border-slate-200 rounded-2xl text-[10px] font-black uppercase tracking-widest text-slate-500",children:l.cancel}),e.jsx("button",{type:"submit",disabled:U||!v.trim(),className:"flex-1 py-4 bg-emerald-600 text-white rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-xl shadow-emerald-500/20 hover:bg-emerald-700 transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:U?e.jsx(S,{size:16,className:"animate-spin"}):s?"تایید بازگشایی":"Confirm Unlock"})]})]})]})})}),y&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white rounded-[2rem] shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",dir:s?"rtl":"ltr",children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-50 text-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:e.jsx(N,{size:32})}),e.jsx("h2",{className:"text-xl font-black text-slate-800 uppercase tracking-tight mb-2",children:s?"تایید قفل کردن روز":"Confirm Day Lock"}),e.jsx("p",{className:"text-xs font-medium text-slate-400 mb-4 px-4",children:s?"قفل کردن روز از تغییرات تصادفی جلوگیری می‌کند.":"Locking a day prevents accidental historical modifications."}),e.jsxs("div",{className:"mb-8 p-3 bg-slate-50 rounded-xl text-[10px] font-black uppercase tracking-widest text-slate-500",children:[y.dates.length," ",s?"روز برای قفل شناسایی شد":"Dates Identified for Lock"]}),e.jsxs("form",{onSubmit:be,className:"space-y-6",children:[x&&e.jsx("div",{className:"p-3 bg-rose-50 text-rose-600 text-[10px] font-black uppercase rounded-lg",children:x}),e.jsx("textarea",{required:!0,rows:3,className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm outline-none focus:ring-4 focus:ring-blue-500/10 focus:border-blue-300",value:w,onChange:t=>H(t.target.value),placeholder:s?"توضیح عملیاتی برای قفل کردن...":"Operational explanation for locking..."}),e.jsxs("div",{className:"flex gap-3 px-4",children:[e.jsx("button",{type:"button",onClick:()=>R(null),className:"flex-1 py-4 border border-slate-200 rounded-2xl text-[10px] font-black uppercase tracking-widest text-slate-500",children:l.cancel}),e.jsx("button",{type:"submit",disabled:B||!w.trim(),className:"flex-1 py-4 bg-blue-600 text-white rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-xl shadow-blue-500/20 hover:bg-blue-700 transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:B?e.jsx(S,{size:16,className:"animate-spin"}):s?"تایید قفل":"Confirm Lock"})]})]})]})})}),r&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-[2rem] shadow-2xl w-full max-w-lg overflow-hidden animate-in zoom-in-95 duration-200",dir:s?"rtl":"ltr",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-slate-800 uppercase tracking-tight",children:s?"ویرایش تراکنش":"Edit Transaction"}),r.locked&&e.jsxs("p",{className:"text-[9px] font-black text-amber-600 uppercase tracking-widest mt-1 flex items-center gap-1",children:[e.jsx(N,{size:10})," ",s?"این ثبت محافظت شده است و به طور خودکار باز خواهد شد.":"This record is protected and will be auto-unlocked."]})]}),e.jsx("button",{onClick:()=>h(null),className:"p-2 hover:bg-slate-100 rounded-full text-slate-400",children:e.jsx(Q,{size:20})})]}),e.jsxs("form",{onSubmit:ue,className:"p-8 space-y-6",children:[x&&e.jsxs("div",{className:"p-4 bg-rose-50 text-rose-600 text-xs font-black uppercase rounded-xl border border-rose-100 flex items-center gap-3",children:[e.jsx(ve,{size:14})," ",x]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[l.quantity," (",l[r.unit]||r.unit,")"]}),e.jsx("input",{type:"number",required:!0,className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm font-bold outline-none focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 transition-all shadow-sm",value:r.quantity,onChange:t=>h({...r,quantity:Number(t.target.value)})})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:s?"علت":"Reason"}),e.jsx("select",{className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm font-bold outline-none focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 transition-all shadow-sm",value:r.reason,onChange:t=>h({...r,reason:t.target.value}),children:We[r.type].map(t=>e.jsx("option",{value:t,children:l[t]||t},t))})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:s?"یادداشت‌های بازرسی":"Audit Notes"}),e.jsx("textarea",{rows:3,className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm outline-none focus:ring-4 focus:ring-blue-500/10",value:r.notes||"",onChange:t=>h({...r,notes:t.target.value}),placeholder:s?"توضیح دهید چرا این تغییر انجام می‌شود...":"Explain why this change is being made..."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>h(null),className:"flex-1 py-4 border border-slate-200 rounded-2xl text-[10px] font-black uppercase tracking-widest text-slate-500",children:l.cancel}),e.jsx("button",{type:"submit",disabled:I,className:"flex-1 py-4 bg-blue-600 text-white rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-xl shadow-blue-500/20 hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:I?e.jsx(S,{size:16,className:"animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(Le,{size:16})," ",s?"ذخیره تغییرات":"Save Changes"]})})]})]})]})}),_&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white rounded-[2rem] shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",dir:s?"rtl":"ltr",children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-rose-50 text-rose-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:e.jsx(K,{size:32})}),e.jsx("h2",{className:"text-xl font-black text-slate-800 uppercase tracking-tight mb-2",children:s?"تایید حذف نرم":"Confirm Soft Delete"}),e.jsx("p",{className:"text-xs font-medium text-slate-400 mb-4 px-4",children:s?"این مورد به عنوان حذف شده علامت‌گذاری شده و از تمامی محاسبات حذف خواهد شد.":"This entry will be marked as deleted and excluded from all calculations."}),e.jsxs("form",{onSubmit:me,className:"space-y-6",children:[x&&e.jsx("div",{className:"p-3 bg-rose-50 text-rose-600 text-[10px] font-black uppercase rounded-lg",children:x}),e.jsx("textarea",{required:!0,rows:3,className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm outline-none focus:ring-4 focus:ring-rose-500/10 focus:border-rose-300",value:k,onChange:t=>O(t.target.value),placeholder:s?"علت حذف برای بازرسی...":"Reason for deletion for audit..."}),e.jsxs("div",{className:"flex gap-3 px-4",children:[e.jsx("button",{type:"button",onClick:()=>L(null),className:"flex-1 py-4 border border-slate-200 rounded-2xl text-[10px] font-black uppercase tracking-widest text-slate-500",children:l.cancel}),e.jsx("button",{type:"submit",disabled:A||!k.trim(),className:"flex-1 py-4 bg-rose-600 text-white rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-xl shadow-rose-500/20 hover:bg-rose-700 transition-all flex items-center justify-center gap-2",children:A?e.jsx(S,{size:16,className:"animate-spin"}):s?"تایید حذف":"Confirm Delete"})]})]})]})})})]})};export{tt as default};
