import{r as x,j as e,A as P,L as F,B as V,g as H,n as I,d as O,t as U,Z as Q,T as W,a as Y,q as Z,S as q,D as G}from"./index-D-P-TEXt.js";import{F as _}from"./fingerprint-pattern-JmWHF8rv.js";import{C as J}from"./calculator-Cjf2TzT8.js";import{C as K}from"./chart-column-CrgVJdd7.js";import{H as X}from"./history-tqB5jrvs.js";import{A as ee}from"./arrow-right-CK3AoaAa.js";import{S as se}from"./scale-BrQOJRvQ.js";import{T as te}from"./trending-up-BYFYVXzO.js";import{C as ae}from"./circle-check-DxqNuXWi.js";import{A as le}from"./award-BwKZvoEc.js";import{P as re}from"./package-D0oOTeG4.js";import{T as ie}from"./truck-Cbe00-Xl.js";const ve=({flockId:i,cycleId:c,api:n,t:ce,isRtl:ne})=>{var u,g,f,j,N,v,w,y,k,C,z,S,R,A;const[t,D]=x.useState(null),[E,m]=x.useState(!1);if(x.useEffect(()=>{(async()=>{if(!(!n.isValidObjectId(i)||!c)){m(!0);try{const a=await n.getCycleAnalysisV2(i,c);D(a.data||a)}catch(a){console.error("Cycle deep dive sync failed",a)}finally{m(!1)}}})()},[i,c,n]),!n.isValidObjectId(i)||!c)return e.jsxs("div",{className:"h-[40vh] flex flex-col items-center justify-center text-slate-400 opacity-40",children:[e.jsx(P,{size:64,strokeWidth:1}),e.jsx("p",{className:"mt-4 text-[10px] font-black uppercase tracking-[0.4em]",children:"Anchor to a specific cycle for deep telemetry"})]});if(E)return e.jsxs("div",{className:"h-[60vh] flex flex-col items-center justify-center opacity-40",children:[e.jsx(F,{size:48,className:"animate-spin text-emerald-600 mb-6"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.4em]",children:"Querying Node Lifecycle Registry..."})]});if(!t)return null;const p=t.production||{};t.feed;const h=t.eggs||{},T=t.mortality||{};t.weight;const l=t.economics||{},B=t.health||{},M=t.breedComparison||{},r=t.predictiveInsights||{};t.eggQuality;const o=t.batchPerformance||{},d=t.anomalies||{},b=Math.min(100,Math.max(0,r.currentProgress||0)),$=(l.profit||0)>=0;return e.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-bottom-6 duration-700",children:[e.jsxs("div",{className:"bg-slate-900 rounded-[3rem] p-10 text-white relative overflow-hidden shadow-2xl border border-white/5",children:[e.jsx("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-blue-600/10 rounded-full translate-x-48 -translate-y-48 blur-[120px]"}),e.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between gap-10 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-3xl flex items-center justify-center shadow-2xl shadow-blue-500/20",children:e.jsx(_,{size:40})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-black uppercase tracking-tighter",children:t.flockName}),e.jsxs("div",{className:"flex wrap items-center gap-4 mt-3",children:[e.jsxs("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-3 py-1 bg-white/5 rounded-lg",children:["Cycle: ",t.cycleId]}),e.jsxs("span",{className:"text-[10px] font-black text-blue-400 uppercase tracking-widest px-3 py-1 bg-blue-500/10 rounded-lg",children:[t.cycleDurationDays," Days Active"]})]})]})]}),e.jsxs("div",{className:"flex-1 max-w-md w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 px-1",children:[e.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Cycle Progress"}),e.jsxs("span",{className:"text-sm font-black tabular-nums text-blue-400",children:[b.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-2 w-full bg-white/5 rounded-full overflow-hidden shadow-inner",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full transition-all duration-1000",style:{width:`${b}%`}})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white border border-slate-200 p-8 rounded-[2.5rem] shadow-sm hover:shadow-xl transition-all group",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4",children:"Closing Census"}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsx("h4",{className:"text-4xl font-black text-slate-900 tabular-nums",children:((u=p.closingBalance)==null?void 0:u.toLocaleString())||"---"}),e.jsx(V,{size:24,className:"text-blue-500 mb-1 group-hover:scale-110 transition-transform"})]}),e.jsxs("p",{className:"mt-4 text-[9px] font-black text-slate-500 uppercase tracking-widest",children:["Cap Utilization: ",p.utilizationRate,"%"]})]}),e.jsxs("div",{className:"bg-white border border-slate-200 p-8 rounded-[2.5rem] shadow-sm hover:shadow-xl transition-all group",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4",children:"Produced Yield"}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsx("h4",{className:"text-4xl font-black text-slate-900 tabular-nums",children:((g=h.totalProduced)==null?void 0:g.toLocaleString())||"---"}),e.jsx(H,{size:24,className:"text-emerald-500 mb-1 group-hover:scale-110 transition-transform"})]}),e.jsxs("p",{className:"mt-4 text-[9px] font-black text-emerald-500 uppercase tracking-widest",children:["Daily Velocity: ",h.dailyProduction," p/d"]})]}),e.jsxs("div",{className:`p-8 rounded-[2.5rem] shadow-2xl transition-all border group ${$?"bg-emerald-50 border-emerald-100 text-emerald-900":"bg-rose-50 border-rose-100 text-rose-900"}`,children:[e.jsx("p",{className:"text-[10px] font-black opacity-60 uppercase tracking-widest mb-4",children:"Fiscal Balance"}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("h4",{className:"text-4xl font-black tabular-nums tracking-tighter",children:[l.profit<0?"-":"","$",Math.abs(l.profit||0).toLocaleString()]}),e.jsx(I,{size:24,className:"opacity-40 mb-1 group-hover:scale-110 transition-transform"})]}),e.jsxs("p",{className:"mt-4 text-[9px] font-black uppercase tracking-widest",children:["Margin: ",l.profitMargin,"% â€¢ Status: ",l.status]})]}),e.jsxs("div",{className:"bg-slate-900 p-8 rounded-[2.5rem] text-white shadow-2xl relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:scale-110 transition-transform",children:e.jsx(P,{size:64})}),e.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest mb-4 relative z-10",children:"Clinical Health"}),e.jsxs("div",{className:"flex items-end justify-between relative z-10",children:[e.jsx("h4",{className:"text-4xl font-black uppercase tracking-tighter",children:B.healthScore||"---"}),e.jsx("div",{className:"w-10 h-10 bg-white/10 rounded-xl flex items-center justify-center group-hover:rotate-6 transition-transform",children:e.jsx(O,{size:20,className:"text-emerald-400"})})]}),e.jsxs("p",{className:"mt-4 text-[9px] font-bold text-slate-500 uppercase tracking-widest relative z-10",children:["Loss Ratio: ",T.rate||"0","%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"xl:col-span-2 bg-white border border-slate-200 rounded-[3rem] p-10 lg:p-14 shadow-sm space-y-12",children:[e.jsxs("div",{className:"flex items-center gap-4 text-slate-900 font-black uppercase text-xs tracking-[0.3em] border-b border-slate-100 pb-8",children:[e.jsx(J,{size:20,className:"text-blue-600"})," P&L Expenditure Ledger"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-16",children:[e.jsxs("div",{className:"space-y-10",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Revenue Inflow"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 rounded-2xl border border-slate-100 group hover:border-emerald-200 transition-all",children:[e.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Egg Sales (Est)"}),e.jsxs("span",{className:"text-base font-black text-slate-800 tabular-nums",children:["$",((f=l.eggRevenue)==null?void 0:f.toLocaleString())||"0"]})]}),e.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 rounded-2xl border border-slate-100 group hover:border-emerald-200 transition-all",children:[e.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Bird Sales (Est)"}),e.jsxs("span",{className:"text-base font-black text-slate-800 tabular-nums",children:["$",((j=l.birdRevenue)==null?void 0:j.toLocaleString())||"0"]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Resource Allocation"}),e.jsx("div",{className:"space-y-4",children:[{label:"Starter Feed",val:l.feedCost,color:"bg-blue-600"},{label:"Veterinary / Med",val:l.medicineCost,color:"bg-indigo-600"},{label:"Energy / Electric",val:l.electricityCost,color:"bg-amber-500"}].map(s=>{var a;return e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex justify-between text-[10px] font-bold",children:[e.jsx("span",{className:"text-slate-500 uppercase",children:s.label}),e.jsxs("span",{className:"text-slate-900 tabular-nums",children:["$",((a=s.val)==null?void 0:a.toLocaleString())||"0"]})]}),e.jsx("div",{className:"h-1 w-full bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${s.color} rounded-full`,style:{width:`${(s.val||0)/(l.totalCost||1)*100}%`}})})]},s.label)})})]})]}),e.jsxs("div",{className:"bg-slate-900 rounded-[2.5rem] p-10 text-white flex flex-col justify-between relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5 group-hover:scale-110 transition-transform duration-1000",children:e.jsx(K,{size:120})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h4",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.4em] mb-12",children:"Consolidated Expenditure"}),e.jsxs("p",{className:"text-5xl font-black tracking-tighter tabular-nums mb-4 text-rose-400",children:["$",((N=l.totalCost)==null?void 0:N.toLocaleString())||"0"]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:"px-4 py-2 bg-white/5 border border-white/10 rounded-xl text-[9px] font-black uppercase tracking-widest text-slate-400",children:"Ledger Verified: ISO-9001"})})]}),e.jsxs("div",{className:"relative z-10 mt-12 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center text-[10px] font-black text-slate-500 uppercase tracking-widest",children:[e.jsx("span",{children:"Analysis Node"}),e.jsx("span",{className:"text-white",children:(v=t.configSource)==null?void 0:v.toUpperCase()})]}),e.jsxs("button",{className:"w-full py-5 bg-white/5 border border-white/10 rounded-2xl text-[10px] font-black uppercase tracking-widest hover:bg-white/10 transition-all flex items-center justify-center gap-3",children:[e.jsx(X,{size:16})," Audit Transaction Chain"]})]})]})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-blue-600 rounded-[3rem] p-10 text-white shadow-2xl relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 group-hover:rotate-12 transition-transform duration-700",children:e.jsx(U,{size:100})}),e.jsxs("h4",{className:"text-xs font-black uppercase tracking-[0.3em] mb-10 relative z-10 flex items-center gap-3",children:[e.jsx(Q,{size:18})," Predictive Harvest Hub"]}),e.jsxs("div",{className:"space-y-8 relative z-10",children:[e.jsxs("div",{className:"p-6 bg-white/10 rounded-2xl border border-white/10",children:[e.jsx("p",{className:"text-[9px] font-bold text-blue-200 uppercase mb-3",children:"Optimal Sale Timing"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xl font-black uppercase",children:new Date((w=r.saleRecommendation)==null?void 0:w.recommendedDate).toLocaleDateString()}),e.jsx(ee,{size:20,className:"text-blue-200 group-hover:translate-x-1 transition-transform"})]}),e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-[10px] font-bold text-emerald-300 uppercase tracking-tight",children:[e.jsx(se,{size:14})," Target: ",(y=r.saleRecommendation)==null?void 0:y.optimalWeight,"g Mass"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-slate-900/40 rounded-2xl border border-white/5",children:[e.jsx("p",{className:"text-[8px] font-bold text-blue-200 uppercase mb-1",children:"Expected Price"}),e.jsx("p",{className:"text-lg font-black tabular-nums",children:((k=r.saleRecommendation)==null?void 0:k.expectedPrice)||"---"})]}),e.jsxs("div",{className:"p-4 bg-slate-900/40 rounded-2xl border border-white/5 text-right",children:[e.jsx("p",{className:"text-[8px] font-bold text-blue-200 uppercase mb-1",children:"Confidence"}),e.jsxs("p",{className:"text-lg font-black tabular-nums",children:[((C=r.saleRecommendation)==null?void 0:C.confidence)||0,"%"]})]})]})]}),e.jsxs("div",{className:"mt-10 pt-8 border-t border-white/10 flex items-center justify-between",children:[e.jsx("p",{className:"text-[9px] font-black uppercase tracking-[0.2em] opacity-60 italic",children:"Algorithm: Sentinel-P4.2"}),e.jsx(te,{size:16,className:"opacity-40"})]})]}),e.jsxs("div",{className:"bg-white border border-slate-200 rounded-[3rem] p-10 shadow-sm flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("h4",{className:"text-xs font-black text-slate-900 uppercase tracking-widest flex items-center gap-3",children:[e.jsx(W,{size:20,className:"text-rose-500"})," Registry Anomalies"]}),e.jsxs("span",{className:"text-[9px] font-black text-slate-400 tabular-nums",children:[d.anomalyCount||0," Events"]})]}),e.jsxs("div",{className:"space-y-4 flex-1",children:[(z=d.detected)==null?void 0:z.map((s,a)=>{var L;return e.jsxs("div",{className:"p-5 bg-rose-50 border border-rose-100 rounded-2xl flex gap-4 animate-in slide-in-from-right-4 duration-300",children:[e.jsx(Y,{size:18,className:"text-rose-600 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black text-rose-700 uppercase mb-1",children:(L=s.type)==null?void 0:L.replace("_"," ")}),e.jsx("p",{className:"text-[9px] font-bold text-rose-500 leading-relaxed uppercase tracking-tight",children:s.message})]})]},a)}),(!d.detected||d.detected.length===0)&&e.jsxs("div",{className:"py-12 text-center opacity-30",children:[e.jsx(ae,{size:40,className:"text-emerald-500 mx-auto mb-4"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Vector Horizon Clear"})]})]}),e.jsx("button",{className:"w-full mt-10 py-4 bg-slate-900 text-white rounded-2xl text-[10px] font-black uppercase tracking-widest hover:bg-black transition-all shadow-xl",children:"Run Diagnostic Scan"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 pb-20",children:[e.jsxs("div",{className:"bg-white border border-slate-200 rounded-[3rem] p-10 shadow-sm flex flex-col overflow-hidden",children:[e.jsxs("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-[0.2em] mb-10 flex items-center gap-4",children:[e.jsx(Z,{size:22,className:"text-indigo-600"})," Genetic Performance Ledger"]}),e.jsx("div",{className:"overflow-x-auto flex-1",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest border-b border-slate-100",children:[e.jsx("th",{className:"pb-4",children:"Breed Profile"}),e.jsx("th",{className:"pb-4",children:"Survival Rate"}),e.jsx("th",{className:"pb-4 text-right",children:"Yield Score"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-50",children:(S=M.ranking)==null?void 0:S.map((s,a)=>e.jsxs("tr",{className:"group hover:bg-slate-50/50 transition-colors",children:[e.jsx("td",{className:"py-6 font-black text-xs text-slate-800 uppercase tracking-tight",children:s.breed}),e.jsx("td",{className:"py-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-xs font-black text-emerald-600 tabular-nums w-12",children:s.survivalRate}),e.jsx("div",{className:"flex-1 h-1.5 bg-slate-100 rounded-full overflow-hidden max-w-[100px]",children:e.jsx("div",{className:"h-full bg-emerald-500 rounded-full",style:{width:s.survivalRate}})})]})}),e.jsx("td",{className:"py-6 text-right",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-blue-50 text-blue-600 rounded-lg text-[10px] font-black tabular-nums",children:[s.productivityScore," ",e.jsx(le,{size:12})]})})]},a))})]})}),e.jsxs("div",{className:"mt-8 pt-8 border-t border-slate-50 flex items-center justify-between text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[e.jsxs("span",{children:["Registry Confidence: ",((R=r.productionForecast)==null?void 0:R.confidence)||0,"%"]}),e.jsx("span",{className:"text-blue-500",children:"Benchmark: Elite Fleet Mean"})]})]}),e.jsxs("div",{className:"bg-white border border-slate-200 rounded-[3rem] p-10 shadow-sm flex flex-col",children:[e.jsxs("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-[0.2em] mb-10 flex items-center gap-4",children:[e.jsx(re,{size:22,className:"text-amber-500"})," Intake Resource Batches"]}),e.jsxs("div",{className:"space-y-4 flex-1",children:[(A=o.batches)==null?void 0:A.map((s,a)=>e.jsxs("div",{className:"p-6 bg-slate-50 border border-slate-100 rounded-[2.5rem] flex items-center justify-between group hover:bg-white hover:border-blue-300 hover:shadow-xl transition-all duration-500 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"w-14 h-14 bg-white rounded-2xl flex items-center justify-center shadow-sm text-amber-500 group-hover:scale-110 transition-transform",children:e.jsx(q,{size:24})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("p",{className:"text-sm font-black text-slate-800 uppercase tracking-tight",children:s.batchNumber}),e.jsx("span",{className:"px-2 py-0.5 bg-emerald-50 text-emerald-600 rounded-lg text-[8px] font-black uppercase tracking-widest",children:s.performanceRating})]}),e.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-1",children:["Supplier: ",s.supplier]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase mb-1",children:"Consumption"}),e.jsxs("p",{className:"text-sm font-black text-slate-800 tabular-nums",children:[s.daysUsed," Days Active"]})]})]},a)),(!o.batches||o.batches.length===0)&&e.jsxs("div",{className:"py-20 text-center opacity-30 flex flex-col items-center gap-4",children:[e.jsx(G,{size:40}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest",children:"Awaiting Resource Ingestion Logs"})]})]}),e.jsxs("div",{className:"mt-8 pt-8 border-t border-slate-50 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 bg-slate-900 text-white px-5 py-3 rounded-2xl shadow-lg",children:[e.jsx(ie,{size:18,className:"text-blue-400"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-[8px] font-black text-slate-500 uppercase leading-none",children:"Reliability Mean"}),e.jsx("p",{className:"text-sm font-black mt-1",children:"ISO-CERTIFIED"})]})]}),e.jsx("button",{className:"px-6 py-3 border border-slate-200 rounded-2xl text-[10px] font-black uppercase tracking-widest text-slate-400 hover:bg-slate-50 transition-all",children:"Supplier Scorecard"})]})]})]})]})};export{ve as default};
