import{j as e,a as ie,Z as P,d as ce,g as B,k as H,r as p,X as oe,L as O,l as de}from"./index-BqfCj9Cx.js";import{D as $,T as V}from"./thermometer-BC0RVOP9.js";import{W as L}from"./wind-CQR_-y-F.js";import{I as q}from"./info-BRptETED.js";import{C as K}from"./circle-check-nzM3eO1E.js";import{S as xe}from"./scale-DVVoC5M5.js";import{P as pe}from"./package-BkE9y1L1.js";import{F as me}from"./fingerprint-pattern-BZdX2SIo.js";import{L as ge}from"./layout-grid-k5JwrBFL.js";import{F as ue}from"./file-text-BvQs2isp.js";const he=({data:r,onChange:f,t:g,isRtl:j})=>{const n=(s,u)=>f({...r,[s]:u});return e.jsxs("div",{className:"space-y-12 animate-in fade-in duration-500",children:[e.jsxs("div",{className:"flex items-center gap-6 border-b border-slate-50 pb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-50 text-blue-600 rounded-[1.5rem] flex items-center justify-center shadow-inner group-hover:scale-110 transition-transform",children:e.jsx($,{size:32})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-slate-900 uppercase tracking-tighter",children:"Water Chemistry Matrix"}),e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mt-1",children:"Direct Clinical Node Input"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10",children:[e.jsxs("div",{className:"space-y-8 bg-slate-50/50 p-8 rounded-[2.5rem] border border-slate-100",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center ml-1",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"pH Balance (6.5 - 8.5)"}),e.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-black ${r.pH>8.5||r.pH<6.5?"bg-rose-100 text-rose-600":"bg-emerald-100 text-emerald-600"}`,children:r.pH||7})]}),e.jsx("input",{type:"range",min:"0",max:"14",step:"0.1",className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-blue-600",value:r.pH||7,onChange:s=>n("pH",parseFloat(s.target.value))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Hardness (mg/L)"}),e.jsx("input",{type:"number",className:"w-full bg-white border border-slate-200 rounded-2xl px-5 py-4 text-sm font-black outline-none focus:ring-8 focus:ring-blue-500/5 transition-all",value:r.hardness||"",onChange:s=>n("hardness",parseFloat(s.target.value)),placeholder:"0.0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Free Chlorine"}),e.jsx("input",{type:"number",step:"0.01",className:"w-full bg-white border border-slate-200 rounded-2xl px-5 py-4 text-sm font-black outline-none focus:ring-8 focus:ring-blue-500/5 transition-all",value:r.freeChlorine||"",onChange:s=>n("freeChlorine",parseFloat(s.target.value)),placeholder:"0.00"})]})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Water Supply Source"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:["municipal","well","rainwater","trucked"].map(s=>e.jsx("button",{type:"button",onClick:()=>n("source",s),className:`px-4 py-3.5 rounded-xl text-[9px] font-black uppercase tracking-widest transition-all ${r.source===s?"bg-blue-600 text-white shadow-lg":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:s},s))})]}),e.jsxs("div",{className:"p-8 bg-slate-900 rounded-[2.5rem] text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:e.jsx(ie,{size:60})}),e.jsxs("h4",{className:"text-[10px] font-black uppercase tracking-[0.2em] mb-4 flex items-center gap-2 relative z-10",children:[e.jsx(P,{size:14,className:"text-blue-400"})," Integrity Check"]}),e.jsx("div",{className:"space-y-3 relative z-10",children:e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-xl border border-white/5",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-white/20 bg-transparent text-blue-500 focus:ring-0",onChange:s=>n("coliformDetected",s.target.checked)}),e.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-400",children:"Biological Contaminants Detected?"})]})})]})]})]})]})},be=({data:r,onChange:f,t:g,isRtl:j})=>{const n=(s,u)=>f({...r,[s]:u});return e.jsxs("div",{className:"space-y-12 animate-in fade-in duration-500",children:[e.jsxs("div",{className:"flex items-center gap-6 border-b border-slate-50 pb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-emerald-50 text-emerald-600 rounded-[1.5rem] flex items-center justify-center shadow-inner group-hover:scale-110 transition-transform",children:e.jsx(L,{size:32})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-slate-900 uppercase tracking-tighter",children:"Atmospheric Node Registry"}),e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mt-1",children:"Environmental Sensor Verification"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-slate-50 p-8 rounded-[2.5rem] border border-slate-100 flex flex-col items-center group",children:[e.jsx(V,{size:24,className:"text-rose-500 mb-6 group-hover:rotate-12 transition-transform"}),e.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-4",children:"Temp (Â°C)"}),e.jsx("input",{type:"number",step:"0.1",className:"w-full bg-white border border-slate-200 rounded-2xl px-4 py-4 text-center text-xl font-black outline-none focus:ring-8 focus:ring-blue-500/5 transition-all shadow-sm",value:r.temperature||"",onChange:s=>n("temperature",parseFloat(s.target.value)),placeholder:"24.5"})]}),e.jsxs("div",{className:"bg-slate-50 p-8 rounded-[2.5rem] border border-slate-100 flex flex-col items-center group",children:[e.jsx(P,{size:24,className:"text-blue-500 mb-6 group-hover:scale-110 transition-transform"}),e.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-4",children:"Humidity (%)"}),e.jsx("input",{type:"number",className:"w-full bg-white border border-slate-200 rounded-2xl px-4 py-4 text-center text-xl font-black outline-none focus:ring-8 focus:ring-blue-500/5 transition-all shadow-sm",value:r.humidity||"",onChange:s=>n("humidity",parseFloat(s.target.value)),placeholder:"65"})]}),e.jsxs("div",{className:"bg-slate-50 p-8 rounded-[2.5rem] border border-slate-100 flex flex-col items-center group",children:[e.jsx(L,{size:24,className:"text-indigo-500 mb-6 group-hover:-translate-y-1 transition-transform"}),e.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-4",children:"Vent Rate"}),e.jsx("input",{type:"number",className:"w-full bg-white border border-slate-200 rounded-2xl px-4 py-4 text-center text-xl font-black outline-none focus:ring-8 focus:ring-blue-500/5 transition-all shadow-sm",value:r.ventilation||"",onChange:s=>n("ventilation",parseFloat(s.target.value)),placeholder:"12.0"})]})]}),e.jsxs("div",{className:"bg-slate-900 rounded-[3rem] p-10 text-white relative overflow-hidden shadow-2xl",children:[e.jsx("div",{className:"absolute top-0 right-0 p-6 opacity-5",children:e.jsx(ce,{size:100})}),e.jsxs("h4",{className:"text-[10px] font-black uppercase tracking-[0.3em] mb-10 flex items-center gap-3 relative z-10",children:[e.jsx(q,{size:16,className:"text-blue-400"})," Advanced Gas Telemetry"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10 relative z-10",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center px-1",children:[e.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Ammonia (PPM)"}),e.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-black ${(r.ammoniaPpm||0)>25?"bg-rose-500 text-white":"bg-emerald-500/10 text-emerald-400"}`,children:r.ammoniaPpm||0})]}),e.jsx("input",{type:"range",min:"0",max:"100",className:"w-full h-1.5 bg-white/10 rounded-lg appearance-none cursor-pointer accent-blue-500",value:r.ammoniaPpm||0,onChange:s=>n("ammoniaPpm",parseInt(s.target.value))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center px-1",children:[e.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"CO2 (PPM)"}),e.jsx("span",{className:"bg-white/5 px-2 py-0.5 rounded text-[10px] font-black text-slate-300",children:r.co2Ppm||0})]}),e.jsx("input",{type:"range",min:"0",max:"5000",step:"100",className:"w-full h-1.5 bg-white/10 rounded-lg appearance-none cursor-pointer accent-indigo-500",value:r.co2Ppm||0,onChange:s=>n("co2Ppm",parseInt(s.target.value))})]})]})]})]})},fe=({data:r,onChange:f,t:g,isRtl:j})=>{var s,u,k,C,F,d;const n=(m,h)=>{const b={...r};b.eggMetrics||(b.eggMetrics={}),b.eggMetrics[m]=h,["gradeA","gradeB","broken"].includes(m)&&(b.eggMetrics.count=(parseInt(b.eggMetrics.gradeA)||0)+(parseInt(b.eggMetrics.gradeB)||0)+(parseInt(b.eggMetrics.broken)||0)),f(b)};return e.jsxs("div",{className:"space-y-12 animate-in fade-in duration-500",children:[e.jsxs("div",{className:"flex items-center gap-6 border-b border-slate-50 pb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-amber-50 text-amber-600 rounded-[1.5rem] flex items-center justify-center shadow-inner group-hover:rotate-6 transition-transform",children:e.jsx(B,{size:32})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-slate-900 uppercase tracking-tighter",children:"Yield Precision Registry"}),e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mt-1",children:"Detailed Egg Grading & Mass"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[e.jsxs("div",{className:"space-y-10",children:[e.jsxs("div",{className:"bg-white border-2 border-blue-100 p-10 rounded-[3rem] shadow-xl shadow-blue-500/5",children:[e.jsx("p",{className:"text-[10px] font-black text-blue-500 uppercase tracking-widest mb-4",children:"Aggregated Yield"}),e.jsx("h4",{className:"text-6xl font-black text-slate-900 tabular-nums",children:((s=r.eggMetrics)==null?void 0:s.count)||0}),e.jsxs("p",{className:"text-[11px] font-bold text-slate-400 mt-4 uppercase flex items-center gap-2",children:[e.jsx(K,{size:14,className:"text-emerald-500"})," Automated Sum Consensus"]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{className:"flex items-center gap-6 p-6 bg-slate-50 border border-slate-100 rounded-[2rem] group hover:bg-white hover:border-blue-200 transition-all",children:[e.jsx("div",{className:"w-12 h-12 bg-white rounded-2xl flex items-center justify-center shadow-sm text-emerald-500 font-black",children:"A"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest block mb-1",children:"Grade A (Premium)"}),e.jsx("input",{type:"number",className:"w-full bg-transparent border-none text-lg font-black outline-none",value:((u=r.eggMetrics)==null?void 0:u.gradeA)||"",onChange:m=>n("gradeA",parseInt(m.target.value)),placeholder:"0"})]})]}),e.jsxs("div",{className:"flex items-center gap-6 p-6 bg-slate-50 border border-slate-100 rounded-[2rem] group hover:bg-white hover:border-amber-200 transition-all",children:[e.jsx("div",{className:"w-12 h-12 bg-white rounded-2xl flex items-center justify-center shadow-sm text-amber-500 font-black",children:"B"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest block mb-1",children:"Grade B (Commercial)"}),e.jsx("input",{type:"number",className:"w-full bg-transparent border-none text-lg font-black outline-none",value:((k=r.eggMetrics)==null?void 0:k.gradeB)||"",onChange:m=>n("gradeB",parseInt(m.target.value)),placeholder:"0"})]})]}),e.jsxs("div",{className:"flex items-center gap-6 p-6 bg-slate-50 border border-slate-100 rounded-[2rem] group hover:bg-white hover:border-rose-200 transition-all",children:[e.jsx("div",{className:"w-12 h-12 bg-white rounded-2xl flex items-center justify-center shadow-sm text-rose-500 font-black",children:"X"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest block mb-1",children:"Broken / Damage"}),e.jsx("input",{type:"number",className:"w-full bg-transparent border-none text-lg font-black outline-none",value:((C=r.eggMetrics)==null?void 0:C.broken)||"",onChange:m=>n("broken",parseInt(m.target.value)),placeholder:"0"})]})]})]})]}),e.jsxs("div",{className:"space-y-10",children:[e.jsxs("div",{className:"bg-slate-900 rounded-[3rem] p-10 text-white relative overflow-hidden shadow-2xl",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5",children:e.jsx(xe,{size:100})}),e.jsxs("h4",{className:"text-[10px] font-black uppercase tracking-[0.3em] mb-10 flex items-center gap-3 relative z-10",children:[e.jsx(P,{size:16,className:"text-blue-400"})," Mass Metrology"]}),e.jsxs("div",{className:"space-y-8 relative z-10",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Total Weight (KG)"}),e.jsx("input",{type:"number",step:"0.01",className:"w-full bg-white/5 border border-white/10 rounded-2xl px-6 py-4 text-xl font-black outline-none focus:bg-white/10 transition-all",value:((F=r.eggMetrics)==null?void 0:F.totalWeightKg)||"",onChange:m=>n("totalWeightKg",parseFloat(m.target.value)),placeholder:"0.00"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Avg Egg Mass (G)"}),e.jsx("input",{type:"number",step:"0.1",className:"w-full bg-white/5 border border-white/10 rounded-2xl px-6 py-4 text-xl font-black outline-none focus:bg-white/10 transition-all",value:((d=r.eggMetrics)==null?void 0:d.avgWeightPerEgg)||"",onChange:m=>n("avgWeightPerEgg",parseFloat(m.target.value)),placeholder:"0.0"})]})]})]}),e.jsxs("div",{className:"p-8 bg-blue-50 border border-blue-100 rounded-[2.5rem] flex items-start gap-5",children:[e.jsx(q,{size:24,className:"text-blue-600 shrink-0 mt-1"}),e.jsx("p",{className:"text-[11px] font-bold text-blue-700 leading-loose uppercase",children:"Yield consistency check: Input grade distribution should match the total daily collection log for precision FCR calculations."})]})]})]})]})},je=[{id:"morning_eggs",label:"Morning Egg Collection",icon:e.jsx(B,{}),color:"text-amber-500 bg-amber-50",values:{type:"egg_collection",eggMetrics:{count:4800,gradeA:4600,gradeB:150,broken:50},reason:"daily_collection"}},{id:"standard_feed",label:"Standard Feed Delivery",icon:e.jsx(pe,{}),color:"text-blue-500 bg-blue-50",values:{type:"feed",feedMetrics:{purchasedKg:1e3,feedType:"Starter",supplier:"Standard Supplier"},reason:"purchase"}},{id:"water_audit",label:"Weekly Water Audit",icon:e.jsx($,{}),color:"text-indigo-500 bg-indigo-50",values:{type:"water_reading",pH:7.2,hardness:120,freeChlorine:.5,source:"well"}},{id:"env_check",label:"Mid-Day Env Check",icon:e.jsx(V,{}),color:"text-rose-500 bg-rose-50",values:{type:"environmental_reading",temperature:24.5,humidity:65,ventilation:12}}],ve=({onApply:r,isRtl:f})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 px-2",children:[e.jsx(H,{size:18,className:"text-blue-500"}),e.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Rapid Ingestion Presets"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:je.map(g=>e.jsxs("button",{onClick:()=>r(g.values),className:"p-5 bg-white border border-slate-200 rounded-2xl flex items-center gap-4 hover:border-blue-300 hover:shadow-lg transition-all group text-left",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform ${g.color}`,children:g.icon}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs font-black text-slate-800 uppercase truncate tracking-tight",children:g.label}),e.jsxs("p",{className:"text-[9px] font-bold text-slate-400 uppercase mt-1",children:["Preset Vector: ",g.values.type.replace("_"," ")]})]})]},g.id))})]}),Ee=({onClose:r,onSubmit:f,flocks:g=[],t:j,api:n,editingMovement:s})=>{var G;const u=j.langToggle==="EN",k=()=>{const t=new Date;return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t.toISOString().slice(0,16)},[C,F]=p.useState([]),[d,m]=p.useState((s==null?void 0:s.type)||""),[h,b]=p.useState((s==null?void 0:s.flockId)||((G=g[0])==null?void 0:G._id)||""),[S,U]=p.useState((s==null?void 0:s.cycleId)||""),[z,Y]=p.useState(null),[v,N]=p.useState({}),[Ne,Q]=p.useState([]),[X,Z]=p.useState({}),[ye,E]=p.useState(!1),[J,_]=p.useState(!1),[A,W]=p.useState(!1),[I,M]=p.useState(""),[T,D]=p.useState(!1);p.useEffect(()=>{(async()=>{try{const c=(await n.getMovementInputSchema()).data||{},i=Object.entries(c).map(([o,x])=>({id:o,label:x.label||o,description:x.description}));F(i),!d&&i.length>0&&m(i[0].id)}catch(a){console.error("Failed to load vector types",a)}})()},[n,d]),p.useEffect(()=>{(async()=>{if(h){E(!0);try{const c=((await n.getCycles(h)).cycles||[]).sort((i,o)=>o.cycleId.localeCompare(i.cycleId));if(Q(c),c.length>0&&!S){const i=c.find(o=>o.status==="active");U(i?i.cycleId:c[0].cycleId)}}catch(a){console.error(a)}finally{E(!1)}}})()},[h,n,S]),p.useEffect(()=>{(async()=>{var a;if(d){_(!0),M("");try{const i=(await n.getMovementInputSchema(d)).data;Y(i),N(s||{date:k(),confidence:"high"});const x=[...i.requiredFields||[],...i.optionalFields||[]].filter(l=>l.apiEndpoint);for(const l of x)if(l.apiEndpoint&&h){const le=l.apiEndpoint.replace(":flockId",h);try{const w=await n.request(le,{},!0),re=((a=w.data)==null?void 0:a.batches)||w.batches||w.data||[];Z(ne=>({...ne,[l.name]:re}))}catch(w){console.error(`Dynamic fetch failed for ${l.name}`,w)}}}catch{M("Schema sync failed")}finally{_(!1)}}})()},[d,n,s,h]);const ee=(t,a)=>t.split(".").reduce((c,i)=>c&&c[i],a),y=p.useCallback((t,a)=>{N(c=>{const i={...c},o=t.split(".");let x=i;for(let l=0;l<o.length-1;l++)x[o[l]]={...x[o[l]]||{}},x=x[o[l]];return x[o[o.length-1]]=a,i})},[]),te=t=>{N({...v,...t}),m(t.type||d),D(!1)},se=async t=>{var c;W(!0),M("");let a={...v,type:d};if(d==="mortality"&&((c=a.birdMetrics)!=null&&c.count)&&(a.mortalityMetrics={count:parseInt(a.birdMetrics.count)||0}),d==="weight"||d==="weight_measurement"){a.weightMetrics||(a.weightMetrics={});const i=parseFloat(a.weightMetrics.averageWeightGrams),o=parseFloat(a.weightMetrics.startWeightGrams)||0,x=parseFloat(a.weightMetrics.endWeightGrams)||0,l=parseFloat(a.weightMetrics.grams)||0;(!i||isNaN(i))&&(o>0&&x>0?a.weightMetrics.averageWeightGrams=(o+x)/2:o>0?a.weightMetrics.averageWeightGrams=o:x>0?a.weightMetrics.averageWeightGrams=x:l>0&&(a.weightMetrics.averageWeightGrams=l))}try{s?await n.updateMovement(h,S,s._id,a):await n.createMovement(h,S,a),r(),f(a)}catch(i){M(i.message||"Registry communication failure")}finally{W(!1)}},R=t=>{var i,o,x;const a=ee(t.name,v)||"",c="w-full bg-white border border-slate-200 rounded-2xl px-6 py-4 text-sm font-black outline-none focus:ring-8 focus:ring-blue-500/5 transition-all shadow-sm";return e.jsxs("div",{className:"space-y-2 group",children:[e.jsxs("div",{className:"flex justify-between items-center ml-1",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:t.label}),t.example&&e.jsxs("span",{className:"text-[8px] font-bold text-slate-300 uppercase tracking-tight",children:["Example: ",t.example]})]}),t.type==="select"?e.jsxs("select",{className:c,value:a,onChange:l=>y(t.name,l.target.value),children:[e.jsx("option",{value:"",children:"Select Option..."}),t.apiEndpoint?(X[t.name]||[]).map(l=>e.jsx("option",{value:l[t.valueField||"_id"],children:l[t.labelField||"displayLabel"]||l.displayLabel},l[t.valueField||"_id"])):(i=t.options)==null?void 0:i.map(l=>e.jsx("option",{value:l,children:l.replace(/_/g," ").toUpperCase()},l))]}):t.type==="textarea"?e.jsx("textarea",{className:`${c} min-h-[100px] font-medium leading-relaxed`,placeholder:t.placeholder,value:a,onChange:l=>y(t.name,l.target.value)}):t.type==="datetime"?e.jsx("input",{type:"datetime-local",className:c,value:a,onChange:l=>y(t.name,l.target.value)}):t.type==="date"?e.jsx("input",{type:"date",className:c,value:a,onChange:l=>y(t.name,l.target.value)}):e.jsx("input",{type:t.type==="number"?"number":"text",className:c,placeholder:t.placeholder,min:(o=t.validation)==null?void 0:o.min,max:(x=t.validation)==null?void 0:x.max,value:a,onChange:l=>y(t.name,t.type==="number"?parseFloat(l.target.value):l.target.value)}),t.hint&&e.jsx("p",{className:"text-[9px] font-medium text-slate-400 italic ml-1",children:t.hint})]},t.name)},ae=["water_reading","environmental_reading"].includes(d);return e.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-md z-[100] flex items-center justify-center p-4 overflow-y-auto",dir:u?"rtl":"ltr",children:e.jsxs("div",{className:"bg-white rounded-[4rem] shadow-2xl w-full max-w-6xl my-auto animate-in zoom-in-95 duration-500 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-10 border-b border-slate-100 flex items-center justify-between bg-slate-50/50 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-900 text-white rounded-2xl flex items-center justify-center shadow-xl",children:e.jsx(me,{size:28})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-slate-900 uppercase tracking-tighter leading-none",children:"Intelligence Registry"}),e.jsxs("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.4em] mt-3",children:["VECTOR PROTOCOL: ",d.replace(/_/g," ").toUpperCase()]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>D(!T),className:`px-6 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all flex items-center gap-2 ${T?"bg-blue-600 text-white shadow-lg":"bg-white border border-slate-200 text-slate-600"}`,children:[e.jsx(H,{size:16})," Templates"]}),e.jsx("button",{onClick:r,className:"p-4 bg-white hover:bg-rose-50 text-slate-400 hover:text-rose-500 rounded-2xl transition-all shadow-sm",children:e.jsx(oe,{size:24})})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row h-[75vh] overflow-hidden",children:[e.jsxs("div",{className:"w-full lg:w-80 bg-slate-50 border-r border-slate-100 p-10 space-y-10 overflow-y-auto no-scrollbar shrink-0",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest block ml-1",children:"Fleet Node"}),e.jsx("select",{className:"w-full bg-white border border-slate-200 rounded-xl px-4 py-3 text-xs font-black uppercase outline-none shadow-sm",value:h,onChange:t=>b(t.target.value),children:g.map(t=>e.jsx("option",{value:t._id,children:t.name},t._id))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest block ml-1",children:"Vector Type"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:C.map(t=>e.jsx("button",{type:"button",onClick:()=>m(t.id),className:`text-left px-5 py-4 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${d===t.id?"bg-blue-600 text-white shadow-xl":"bg-white text-slate-400 border border-slate-200 hover:bg-slate-100"}`,children:t.label},t.id))})]})]}),e.jsx("div",{className:"flex-1 p-14 overflow-y-auto no-scrollbar bg-white relative",children:J?e.jsx("div",{className:"h-full flex flex-col items-center justify-center opacity-40",children:e.jsx(O,{size:48,className:"animate-spin text-blue-600"})}):T?e.jsx("div",{className:"animate-in fade-in duration-300",children:e.jsx(ve,{onApply:te,isRtl:u})}):e.jsxs("div",{className:"space-y-12 animate-in fade-in duration-500 pb-20",children:[I&&e.jsxs("div",{className:"bg-rose-50 text-rose-600 p-6 rounded-2xl border border-rose-100 flex items-center gap-4",children:[e.jsx(de,{size:24}),e.jsx("p",{className:"text-xs font-black uppercase tracking-tight",children:Array.isArray(I)?I.join(", "):I})]}),d==="water_reading"&&e.jsx(he,{data:v,onChange:N,t:j,isRtl:u}),d==="environmental_reading"&&e.jsx(be,{data:v,onChange:N,t:j,isRtl:u}),d==="egg_collection"&&e.jsx(fe,{data:v,onChange:N,t:j,isRtl:u}),!ae&&z&&e.jsxs("div",{className:"space-y-12",children:[e.jsxs("div",{className:"bg-slate-50 p-10 rounded-[3rem] border border-slate-100 shadow-inner",children:[e.jsxs("h4",{className:"text-xs font-black text-slate-800 uppercase tracking-widest mb-10 flex items-center gap-3",children:[e.jsx(ge,{className:"text-blue-600",size:18})," Primary Protocol (Required)"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10",children:z.requiredFields.map(t=>R(t))})]}),z.optionalFields.length>0&&e.jsxs("div",{className:"bg-white p-10 rounded-[3rem] border-2 border-dashed border-slate-100",children:[e.jsxs("h4",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-10 flex items-center gap-3",children:[e.jsx(ue,{className:"text-slate-300",size:18})," Contextual Metadata (Optional)"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10",children:z.optionalFields.map(t=>R(t))})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-10 pt-10 border-t border-slate-100",children:[e.jsx("div",{className:"flex-1 flex bg-slate-100 p-1.5 rounded-2xl shadow-inner min-w-[300px]",children:["high","medium","low"].map(t=>e.jsxs("button",{type:"button",onClick:()=>y("confidence",t),className:`flex-1 py-4 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${v.confidence===t?"bg-white text-blue-600 shadow-xl":"text-slate-400 hover:text-slate-600"}`,children:[t," Confidence"]},t))}),e.jsxs("div",{className:"flex gap-6 flex-[2] min-w-full sm:min-w-[400px]",children:[e.jsx("button",{type:"button",onClick:r,className:"flex-1 py-6 border-2 border-slate-100 rounded-2xl text-[12px] font-black uppercase tracking-[0.2em] text-slate-400 hover:bg-slate-50 transition-all",children:"Discard"}),e.jsx("button",{onClick:()=>se(),disabled:A,className:"flex-[2] py-6 bg-slate-900 text-white rounded-2xl text-[12px] font-black uppercase tracking-[0.2em] shadow-2xl hover:bg-black transition-all flex items-center justify-center gap-4",children:A?e.jsx(O,{size:24,className:"animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(K,{size:24})," Commit to Registry"]})})]})]})]})})]})]})})};export{Ee as default};
