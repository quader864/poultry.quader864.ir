import{r as c,j as e,L as h,D as u,d as f}from"./index-BqfCj9Cx.js";import{B as b}from"./box-D9n03Fvj.js";import{P as g}from"./package-BkE9y1L1.js";import{T as j}from"./trending-up-uU0_5pp5.js";import{H as N}from"./history-pvMIkCk2.js";import{T as y}from"./truck-B0TYjE_d.js";import{S as v}from"./star-Dpml8xZg.js";const P=({flockId:r,cycleId:l,api:i,t:w,isRtl:k})=>{const[t,p]=c.useState(null),[m,n]=c.useState(!1);return c.useEffect(()=>{(async()=>{if(!(!i.isValidObjectId(r)||!l)){n(!0);try{const a=await i.getCycleBatchesV2(r,l);p(a.data)}catch(a){console.error("Resource Mesh sync failed",a)}finally{n(!1)}}})()},[r,l,i]),!i.isValidObjectId(r)||!l?e.jsxs("div",{className:"h-[40vh] flex flex-col items-center justify-center text-slate-400 opacity-40",children:[e.jsx(b,{size:64,strokeWidth:1}),e.jsx("p",{className:"mt-4 text-[10px] font-black uppercase tracking-[0.4em]",children:"Select a Cycle Anchor for Resource Chain Analysis"})]}):m?e.jsxs("div",{className:"h-[60vh] flex flex-col items-center justify-center opacity-40",children:[e.jsx(h,{size:48,className:"animate-spin text-teal-600 mb-6"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.4em]",children:"Auditing Inbound Batches..."})]}):t?e.jsx("div",{className:"space-y-10 animate-in fade-in slide-in-from-bottom-6 duration-700",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-10",children:[e.jsxs("div",{className:"lg:col-span-3 space-y-8",children:[e.jsx("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-[0.2em] px-2",children:"Cycle Batch Registry"}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[Array.isArray(t.batches)&&t.batches.map((s,a)=>{var d,x,o;return e.jsxs("div",{className:"bg-white border border-slate-200 rounded-[2.5rem] p-8 shadow-sm hover:shadow-2xl transition-all group flex flex-col md:flex-row items-center gap-10",children:[e.jsx("div",{className:"w-20 h-20 bg-slate-50 text-slate-400 rounded-3xl flex items-center justify-center shrink-0 group-hover:bg-blue-50 group-hover:text-blue-600 transition-all duration-500 shadow-sm",children:e.jsx(g,{size:32})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex wrap items-center gap-3 mb-3",children:[e.jsxs("span",{className:"px-3 py-1 bg-slate-900 text-white rounded-lg text-[9px] font-black uppercase",children:["LOT: ",s.batchNumber||"UNKNOWN"]}),e.jsx("span",{className:"px-3 py-1 bg-blue-50 text-blue-600 rounded-lg text-[9px] font-black uppercase tracking-widest",children:s.feedType||"Batch Feed"}),e.jsxs("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:["Supplier: ",s.supplier||"Registry N/A"]})]}),e.jsxs("h4",{className:"text-xl font-black text-slate-900 uppercase tracking-tighter mb-4",children:["Batch Performance: ",((d=s.performance)==null?void 0:d.birdHealth)||"PENDING CALIBRATION"]}),e.jsxs("div",{className:"flex items-center gap-10 pt-6 border-t border-slate-50 text-[11px] font-black text-slate-400 uppercase tracking-widest",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{size:14,className:"text-emerald-500"})," FCR: ",((x=s.performance)==null?void 0:x.fcr)||"---"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{size:14,className:"text-blue-500"})," Intake: ",((o=s.consumedKg)==null?void 0:o.toLocaleString())||"0"," KG"]})]})]}),e.jsxs("div",{className:"text-right shrink-0",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase mb-1",children:"Consumption"}),e.jsxs("p",{className:"text-3xl font-black text-slate-900 tabular-nums",children:[s.consumptionPercentage||0,"%"]}),e.jsx("div",{className:"w-32 bg-slate-100 h-1.5 mt-2 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-600",style:{width:`${s.consumptionPercentage||0}%`}})})]})]},a)}),(!Array.isArray(t.batches)||t.batches.length===0)&&e.jsxs("div",{className:"py-20 text-center opacity-30 flex flex-col items-center gap-4 bg-slate-50 rounded-[2.5rem] border border-dashed border-slate-200",children:[e.jsx(N,{size:48}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest",children:"No Batch Telemetry for this Cycle"})]})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-slate-900 rounded-[3rem] p-10 text-white shadow-2xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5",children:e.jsx(y,{size:100})}),e.jsxs("h4",{className:"text-xs font-black uppercase tracking-[0.2em] mb-10 relative z-10 flex items-center gap-3",children:[e.jsx(v,{size:18,className:"text-amber-400"})," Reliability Scores"]}),e.jsxs("div",{className:"space-y-8 relative z-10",children:[Array.isArray(t.supplierReliability)&&t.supplierReliability.map((s,a)=>e.jsxs("div",{className:"p-6 bg-white/5 border border-white/10 rounded-3xl group hover:bg-white/10 transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("span",{className:"text-xs font-black uppercase tracking-tight",children:s.supplier}),e.jsxs("span",{className:"text-sm font-black text-amber-400 tabular-nums",children:[s.qualityScore,"/10"]})]}),e.jsxs("div",{className:"flex justify-between items-center text-[10px] font-bold text-slate-500 uppercase",children:[e.jsx("span",{children:"OTD Reliability"}),e.jsxs("span",{className:"text-white",children:[(s.deliveryReliability*100).toFixed(0),"%"]})]})]},a)),(!Array.isArray(t.supplierReliability)||t.supplierReliability.length===0)&&e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase italic py-4",children:"No supplier metrics recorded for this lifecycle."})]})]}),e.jsxs("div",{className:"bg-white border border-slate-200 rounded-[3.5rem] p-10 shadow-sm flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-blue-50 text-blue-600 rounded-[2rem] flex items-center justify-center mb-6 shadow-inner",children:e.jsx(f,{size:40})}),e.jsx("h4",{className:"text-xs font-black text-slate-900 uppercase tracking-widest mb-2",children:"Protocol Verified"}),e.jsx("p",{className:"text-[10px] font-bold text-slate-400 leading-relaxed uppercase",children:"The resource chain consensus has been fully audited against cycle yield targets."})]})]})]})}):null};export{P as default};
