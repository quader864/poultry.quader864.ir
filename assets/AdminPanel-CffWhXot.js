import{r,j as e,D as u,S as f,g as j}from"./index-C3cTeMHF.js";import{Z as v}from"./zap-C1QX5NHY.js";import{F as m}from"./file-text-DrWCzLYQ.js";const y=({api:i,t:s})=>{var n,c,x;const[a,h]=r.useState("health"),[l,b]=r.useState(null),[d,p]=r.useState([]),o=s.langToggle==="EN";return r.useEffect(()=>{a==="health"?i.getSystemHealth().then(b).catch(console.error):a==="logs"&&i.getAuditLogs().then(t=>p(t.data)).catch(console.error)},[a,i]),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex border-b border-slate-200 bg-white px-4 sm:px-6 rounded-t-xl overflow-x-auto no-scrollbar scroll-smooth",children:[{id:"health",label:s.systemHealth,icon:e.jsx(v,{size:16})},{id:"models",label:s.resourceModels,icon:e.jsx(u,{size:16})},{id:"rules",label:s.detectionRules,icon:e.jsx(f,{size:16})},{id:"logs",label:s.auditTrail,icon:e.jsx(m,{size:16})}].map(t=>e.jsxs("button",{onClick:()=>h(t.id),className:`flex items-center gap-2 px-6 py-4 text-xs lg:text-sm font-bold transition-all border-b-2 whitespace-nowrap ${a===t.id?"border-blue-600 text-blue-600":"border-transparent text-slate-400 hover:text-slate-600"}`,children:[t.icon," ",t.label]},t.id))}),e.jsxs("div",{className:"bg-white rounded-b-xl border border-t-0 border-slate-200 p-4 sm:p-6 min-h-[400px]",children:[a==="health"&&l&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"p-5 bg-slate-50 rounded-xl border border-slate-100 shadow-sm transition-all hover:bg-white hover:shadow-lg",children:[e.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:s.dbConnectivity}),e.jsx("div",{className:`text-xl font-black ${(n=l.database)!=null&&n.connected?"text-emerald-600":"text-rose-600"}`,children:(c=l.database)!=null&&c.connected?s.operational:s.disconnected})]}),e.jsxs("div",{className:"p-5 bg-slate-50 rounded-xl border border-slate-100 shadow-sm transition-all hover:bg-white hover:shadow-lg",children:[e.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:s.pendingJobs}),e.jsx("div",{className:"text-xl font-black text-blue-600 tabular-nums",children:((x=l.jobs)==null?void 0:x.pending)||0})]}),e.jsxs("div",{className:"p-5 bg-slate-50 rounded-xl border border-slate-100 shadow-sm transition-all hover:bg-white hover:shadow-lg",children:[e.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:s.systemStatus}),e.jsx("div",{className:"text-xl font-black text-slate-800 uppercase tracking-tighter",children:l.status})]}),e.jsxs("div",{className:"p-5 bg-slate-50 rounded-xl border border-slate-100 shadow-sm transition-all hover:bg-white hover:shadow-lg",children:[e.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:s.serverTime}),e.jsx("div",{className:"text-sm font-mono text-slate-500 font-bold",children:new Date(l.timestamp).toLocaleTimeString()})]})]}),a==="logs"&&e.jsx("div",{className:"space-y-3",children:d.length===0?e.jsxs("div",{className:"py-24 text-center text-slate-300 flex flex-col items-center gap-4",children:[e.jsx(m,{size:48,className:"opacity-20"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest",children:s.noAuditLogs})]}):e.jsx("div",{className:"overflow-hidden border border-slate-100 rounded-xl",children:d.map((t,g)=>e.jsxs("div",{className:`flex flex-col sm:flex-row sm:items-center justify-between p-4 border-b last:border-0 border-slate-50 hover:bg-slate-50 transition-colors ${o?"sm:flex-row-reverse":""}`,children:[e.jsxs("div",{className:"flex items-start sm:items-center gap-4 mb-2 sm:mb-0",children:[e.jsx("div",{className:"text-[10px] font-black tabular-nums bg-slate-100 px-2 py-1 rounded-lg text-slate-500 shrink-0",children:new Date(t.timestamp).toLocaleTimeString()}),e.jsxs("div",{className:`text-xs font-bold text-slate-800 ${o?"text-right":"text-left"}`,children:[e.jsx("span",{className:"text-blue-600 uppercase tracking-tighter",children:t.actorRole})," ",t.action,"d ",t.targetType]})]}),e.jsxs("div",{className:"text-[10px] text-slate-400 font-mono bg-slate-50 px-2 py-1 rounded self-start sm:self-center",children:["ID: ",t.targetId.slice(-8).toUpperCase()]})]},g))})}),(a==="models"||a==="rules")&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 px-4 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-blue-50 text-blue-600 rounded-[2rem] mb-6 flex items-center justify-center shadow-inner",children:e.jsx(j,{size:40,className:"animate-spin-slow"})}),e.jsx("h3",{className:"text-xl font-black text-slate-800 uppercase tracking-tight",children:s.policyEngine}),e.jsx("p",{className:"text-xs font-medium text-slate-400 max-w-sm mt-3 leading-relaxed",children:o?"ویرایشگر مدل و قوانین از یک رابط مجهز به JSON-schema برای به‌روزرسانی زنده و ایمن منطق شناسایی استفاده می‌کند.":"The model and rule editors use a JSON-schema powered interface for safe live-updates to the detection logic."}),e.jsx("button",{className:"mt-8 px-8 py-3 bg-slate-900 text-white rounded-xl text-[10px] font-black uppercase tracking-[0.2em] shadow-xl hover:bg-black transition-all",children:s.openEditor})]})]})]})};export{y as default};
