import{r as n,j as e,A as h,S as u,m as b,a as g,N as f,G as j,Z as w,T as N}from"./index-Dfm8v7ej.js";import{e as m}from"./EventBusService-uYe-P4JI.js";import{T as y}from"./trending-down-DzmYAuh5.js";import{L as v}from"./layers-CWvkg5i4.js";import{S as k}from"./share-2-CRabZsiT.js";import{A as z}from"./arrow-right-3TF_Vu5w.js";const S=({data:o})=>{const p=n.useRef(null),a=220,i=o.nodes.map((s,c)=>{const l=c/(o.nodes.length||1)*2*Math.PI;return{...s,x:a*Math.cos(l)+a+50,y:a*Math.sin(l)+a+50}});return e.jsxs("div",{ref:p,className:"w-full h-full flex items-center justify-center p-10 animate-in zoom-in duration-1000",children:[e.jsxs("svg",{width:"600",height:"600",viewBox:"0 0 600 600",className:"drop-shadow-2xl",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"lineGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:"0.2"}),e.jsx("stop",{offset:"100%",stopColor:"#6366f1",stopOpacity:"0.2"})]}),e.jsxs("filter",{id:"glow",children:[e.jsx("feGaussianBlur",{stdDeviation:"2.5",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),o.links.map((s,c)=>{const l=i.find(r=>r.id===s.source),t=i.find(r=>r.id===s.target);return!l||!t?null:e.jsx("line",{x1:l.x,y1:l.y,x2:t.x,y2:t.y,stroke:"url(#lineGrad)",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-[dash_20s_linear_infinite]"},c)}),i.map((s,c)=>e.jsxs("g",{className:"group cursor-pointer",children:[e.jsx("circle",{cx:s.x,cy:s.y,r:"18",fill:s.group==="iot"?"#3b82f6":s.group==="supply"?"#fbbf24":"#6366f1",className:"transition-all duration-300 group-hover:r-[22] group-hover:stroke-white group-hover:stroke-[4]",filter:"url(#glow)"}),e.jsx("text",{x:s.x,y:s.y+35,textAnchor:"middle",className:"fill-slate-400 text-[8px] font-black uppercase tracking-widest opacity-0 group-hover:opacity-100 transition-opacity",children:s.label})]},c))]}),e.jsx("style",{children:`
        @keyframes dash {
          to { stroke-dashoffset: -1000; }
        }
      `})]})},R=({api:o,t:p})=>{const[a,i]=n.useState([]),[s,c]=n.useState({incidents:4,impactedSupply:"$12,400",downtimeRisk:"Low",systemIntegrity:98.4});n.useEffect(()=>(i(m.getHistory()),m.subscribe("*",r=>{i(d=>[r,...d.slice(0,49)])})),[]);const l=n.useMemo(()=>{const t=[],r=[];return a.slice(0,15).forEach((d,x)=>{t.push({id:`node-${x}`,label:d.type,group:d.type.split(".")[0]}),x>0&&r.push({source:`node-${x-1}`,target:`node-${x}`,value:1})}),{nodes:t,links:r}},[a]);return e.jsxs("div",{className:"space-y-10 animate-in fade-in duration-700",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-slate-900 p-8 rounded-[2.5rem] text-white border border-white/5 shadow-2xl relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:scale-110 transition-transform",children:e.jsx(h,{size:80})}),e.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest mb-3 relative z-10",children:"Cross-Module Incidents"}),e.jsx("h4",{className:"text-5xl font-black tabular-nums tracking-tighter relative z-10",children:s.incidents}),e.jsxs("div",{className:"mt-6 flex items-center gap-2 text-emerald-400 relative z-10",children:[e.jsx(y,{size:14}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"MTTR Improved by 12%"})]})]}),e.jsxs("div",{className:"bg-white border border-slate-200 p-8 rounded-[2.5rem] shadow-sm flex flex-col justify-center group hover:border-blue-300 transition-all",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3",children:"Supply Chain Exposure"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-4xl font-black text-slate-900 tabular-nums",children:s.impactedSupply}),e.jsx(u,{size:32,className:"text-blue-500"})]})]}),e.jsxs("div",{className:"bg-white border border-slate-200 p-8 rounded-[2.5rem] shadow-sm flex flex-col justify-center group hover:border-indigo-300 transition-all",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3",children:"Financial Drift Risk"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-4xl font-black text-slate-900 tracking-tighter",children:s.downtimeRisk}),e.jsx(b,{size:32,className:"text-indigo-500"})]})]}),e.jsxs("div",{className:"bg-blue-600 p-8 rounded-[2.5rem] shadow-2xl shadow-blue-500/20 text-white relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:scale-110 transition-transform",children:e.jsx(v,{size:80})}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest mb-3 opacity-60",children:"System Integrity"}),e.jsxs("h4",{className:"text-4xl font-black tracking-tighter",children:[s.systemIntegrity,"%"]}),e.jsxs("div",{className:"mt-6 p-2.5 bg-white/10 rounded-xl flex items-center justify-center gap-2 border border-white/10",children:[e.jsx(g,{size:14,className:"text-blue-200"}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"Global Protocol Active"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-10",children:[e.jsx("div",{className:"xl:col-span-3",children:e.jsxs("div",{className:"bg-white border border-slate-200 rounded-[3.5rem] p-10 shadow-sm flex flex-col min-h-[600px] relative overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-10 shrink-0 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-900 text-white rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(f,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-slate-900 uppercase tracking-tighter",children:"Impact Causality Network"}),e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mt-1",children:"Cross-Module Event Propagation Graph"})]})]}),e.jsxs("div",{className:"flex bg-slate-50 p-1.5 rounded-xl border border-slate-100",children:[e.jsx("button",{className:"px-4 py-2 bg-white rounded-lg text-[10px] font-black uppercase text-blue-600 shadow-sm",children:"Topology View"}),e.jsx("button",{className:"px-4 py-2 text-slate-400 text-[10px] font-black uppercase",children:"Hierarchical"})]})]}),e.jsx("div",{className:"flex-1 relative bg-slate-50/50 rounded-[2.5rem] border border-slate-100 shadow-inner flex items-center justify-center",children:e.jsx(S,{data:l})})]})}),e.jsxs("div",{className:"xl:col-span-1 space-y-8",children:[e.jsxs("div",{className:"bg-slate-900 rounded-[3rem] p-10 text-white shadow-2xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5",children:e.jsx(j,{size:100})}),e.jsxs("h4",{className:"text-xs font-black uppercase tracking-[0.2em] mb-10 relative z-10 flex items-center gap-3",children:[e.jsx(w,{size:18,className:"text-blue-400"})," Event Stream"]}),e.jsx("div",{className:"space-y-6 relative z-10 max-h-[400px] overflow-y-auto no-scrollbar",children:a.length===0?e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase italic",children:"Awaiting event capture..."}):a.map((t,r)=>e.jsxs("div",{className:"p-4 bg-white/5 border border-white/5 rounded-2xl group hover:bg-white/10 transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`text-[8px] font-black uppercase tracking-widest px-2 py-0.5 rounded ${t.type.includes("fail")||t.type.includes("critical")?"bg-rose-500 text-white":"bg-blue-600 text-white"}`,children:t.type.split(".")[0]}),e.jsx("span",{className:"text-[8px] font-mono text-slate-500 tabular-nums",children:new Date(t.timestamp).toLocaleTimeString()})]}),e.jsx("p",{className:"text-[11px] font-bold text-slate-300 uppercase leading-relaxed line-clamp-1",children:t.type.split(".")[1].replace(/_/g," ")})]},r))}),e.jsxs("button",{className:"w-full mt-10 py-4 bg-white/10 text-white rounded-2xl text-[10px] font-black uppercase tracking-widest border border-white/10 hover:bg-white/20 transition-all flex items-center justify-center gap-2",children:[e.jsx(k,{size:14})," Global Registry Export"]})]}),e.jsxs("div",{className:"bg-white border border-slate-200 rounded-[3rem] p-10 shadow-sm",children:[e.jsx("h4",{className:"text-xs font-black text-slate-900 uppercase tracking-widest mb-8",children:"Automation Suggestions"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-5 bg-blue-50 border border-blue-100 rounded-2xl flex items-start gap-4",children:[e.jsx(N,{className:"text-blue-600 shrink-0 mt-1",size:18}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black text-blue-900 uppercase tracking-widest mb-1",children:"New Workflow Detected"}),e.jsx("p",{className:"text-[9px] font-bold text-blue-700 leading-relaxed uppercase",children:"Pattern: [Temp Spike] usually follows [Water Pressure Drop]. Suggest merging playbooks."}),e.jsxs("button",{className:"mt-3 flex items-center gap-2 text-[9px] font-black text-blue-600 uppercase",children:["Automate Sequence ",e.jsx(z,{size:10})]})]})]})})]})]})]})]})};export{R as default};
